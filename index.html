<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    * {
      font-family: 'Prompt', sans-serif;
    }
    .income-card {
      animation: slideIn 0.3s ease-out;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .tab-active {
      position: relative;
    }
    .tab-active::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      height: 3px;
      background: currentColor;
      border-radius: 3px 3px 0 0;
    }
    .stat-card {
      backdrop-filter: blur(10px);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full overflow-auto" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);">
   <div class="max-w-2xl mx-auto p-4 pb-8"><!-- Header -->
    <header class="text-center py-6">
     <h1 id="app-title" class="text-3xl font-bold text-white mb-2">üí∞ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</h1>
     <p class="text-slate-400 text-sm">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢‡∏î‡∏≤‡∏¢</p>
    </header><!-- Summary Cards -->
    <div class="grid grid-cols-3 gap-3 mb-6">
     <div class="stat-card bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-2xl p-4 text-center">
      <p class="text-emerald-400 text-xs font-medium mb-1">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
      <p id="daily-total" class="text-white font-bold text-lg">‡∏ø0</p>
     </div>
     <div class="stat-card bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-2xl p-4 text-center">
      <p class="text-blue-400 text-xs font-medium mb-1">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ</p>
      <p id="weekly-total" class="text-white font-bold text-lg">‡∏ø0</p>
     </div>
     <div class="stat-card bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-2xl p-4 text-center">
      <p class="text-purple-400 text-xs font-medium mb-1">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</p>
      <p id="monthly-total" class="text-white font-bold text-lg">‡∏ø0</p>
     </div>
    </div><!-- Add Income Form -->
    <div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-5 mb-6">
     <h2 class="text-white font-semibold mb-4 flex items-center gap-2"><span class="text-2xl">‚ûï</span> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÉ‡∏´‡∏°‡πà</h2>
     <form id="income-form" class="space-y-4">
      <div><label for="amount" class="block text-slate-300 text-sm mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label> <input type="number" id="amount" placeholder="0.00" step="0.01" min="0" required class="w-full bg-slate-900/50 border border-slate-600 rounded-xl px-4 py-3 text-white text-lg placeholder-slate-500 focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all">
      </div>
      <div><label for="description" class="block text-slate-300 text-sm mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label> <input type="text" id="description" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô, ‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á, ‡πÇ‡∏ö‡∏ô‡∏±‡∏™..." required class="w-full bg-slate-900/50 border border-slate-600 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all">
      </div>
      <div><label for="category" class="block text-slate-300 text-sm mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label> <select id="category" required class="w-full bg-slate-900/50 border border-slate-600 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all"> <option value="salary">üíº ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option> <option value="freelance">üíª ‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå</option> <option value="business">üè™ ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</option> <option value="investment">üìà ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô</option> <option value="bonus">üéÅ ‡πÇ‡∏ö‡∏ô‡∏±‡∏™</option> <option value="other">üìå ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option> </select>
      </div>
      <div><label for="date" class="block text-slate-300 text-sm mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label> <input type="date" id="date" required class="w-full bg-slate-900/50 border border-slate-600 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all">
      </div><button type="submit" id="submit-btn" class="w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white font-semibold py-3 px-6 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ </button>
     </form>
     <p id="limit-warning" class="hidden text-amber-400 text-sm mt-3 text-center">‚ö†Ô∏è ‡∏ñ‡∏∂‡∏á‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î 999 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏ö‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
    </div><!-- Filter Tabs -->
    <div class="flex gap-2 mb-4 bg-slate-800/30 p-1 rounded-xl"><button data-filter="all" class="filter-tab flex-1 py-2 px-4 rounded-lg text-sm font-medium text-white bg-slate-700/50 transition-all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button> <button data-filter="today" class="filter-tab flex-1 py-2 px-4 rounded-lg text-sm font-medium text-slate-400 hover:text-white transition-all">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button> <button data-filter="week" class="filter-tab flex-1 py-2 px-4 rounded-lg text-sm font-medium text-slate-400 hover:text-white transition-all">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</button> <button data-filter="month" class="filter-tab flex-1 py-2 px-4 rounded-lg text-sm font-medium text-slate-400 hover:text-white transition-all">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
    </div><!-- Income List -->
    <div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl overflow-hidden">
     <div class="p-4 border-b border-slate-700/50">
      <h2 class="text-white font-semibold flex items-center gap-2"><span class="text-2xl">üìã</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ <span id="record-count" class="text-slate-400 text-sm font-normal">(0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</span></h2>
     </div>
     <div id="income-list" class="divide-y divide-slate-700/30 max-h-96 overflow-y-auto">
      <div class="p-8 text-center text-slate-500"><span class="text-4xl block mb-2">üì≠</span> ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ
      </div>
     </div>
    </div><!-- Footer -->
    <footer class="text-center mt-6 text-slate-500 text-sm">
     ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô Canva Sheet
    </footer>
   </div><!-- Delete Confirmation Modal -->
   <div id="delete-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50">
    <div class="bg-slate-800 border border-slate-700 rounded-2xl p-6 max-w-sm w-full">
     <h3 class="text-white font-semibold text-lg mb-2">üóëÔ∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h3>
     <p class="text-slate-400 mb-6">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
     <div class="flex gap-3"><button id="cancel-delete" class="flex-1 py-2 px-4 bg-slate-700 hover:bg-slate-600 text-white rounded-xl transition-all">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button> <button id="confirm-delete" class="flex-1 py-2 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-all">‡∏•‡∏ö</button>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      app_title: 'üí∞ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ',
      currency_symbol: '‡∏ø',
      primary_color: '#10b981',
      secondary_color: '#1e293b',
      text_color: '#ffffff',
      accent_color: '#3b82f6',
      background_color: '#0f172a'
    };

    let incomeRecords = [];
    let currentFilter = 'all';
    let recordToDelete = null;

    const categoryIcons = {
      salary: 'üíº',
      freelance: 'üíª',
      business: 'üè™',
      investment: 'üìà',
      bonus: 'üéÅ',
      other: 'üìå'
    };

    const categoryNames = {
      salary: '‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô',
      freelance: '‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå',
      business: '‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à',
      investment: '‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô',
      bonus: '‡πÇ‡∏ö‡∏ô‡∏±‡∏™',
      other: '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'
    };

    // Date helpers
    function isToday(dateStr) {
      const today = new Date();
      const date = new Date(dateStr);
      return date.toDateString() === today.toDateString();
    }

    function isThisWeek(dateStr) {
      const today = new Date();
      const date = new Date(dateStr);
      const startOfWeek = new Date(today);
      startOfWeek.setDate(today.getDate() - today.getDay());
      startOfWeek.setHours(0, 0, 0, 0);
      const endOfWeek = new Date(startOfWeek);
      endOfWeek.setDate(startOfWeek.getDate() + 7);
      return date >= startOfWeek && date < endOfWeek;
    }

    function isThisMonth(dateStr) {
      const today = new Date();
      const date = new Date(dateStr);
      return date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();
    }

    function formatDate(dateStr) {
      const date = new Date(dateStr);
      const options = { day: 'numeric', month: 'short', year: 'numeric' };
      return date.toLocaleDateString('th-TH', options);
    }

    function formatCurrency(amount, symbol) {
      return symbol + amount.toLocaleString('th-TH', { minimumFractionDigits: 0, maximumFractionDigits: 2 });
    }

    function calculateTotals(records, currencySymbol) {
      let daily = 0, weekly = 0, monthly = 0;
      
      records.forEach(record => {
        const amount = parseFloat(record.amount) || 0;
        if (isToday(record.date)) daily += amount;
        if (isThisWeek(record.date)) weekly += amount;
        if (isThisMonth(record.date)) monthly += amount;
      });

      document.getElementById('daily-total').textContent = formatCurrency(daily, currencySymbol);
      document.getElementById('weekly-total').textContent = formatCurrency(weekly, currencySymbol);
      document.getElementById('monthly-total').textContent = formatCurrency(monthly, currencySymbol);
    }

    function filterRecords(records, filter) {
      switch (filter) {
        case 'today': return records.filter(r => isToday(r.date));
        case 'week': return records.filter(r => isThisWeek(r.date));
        case 'month': return records.filter(r => isThisMonth(r.date));
        default: return records;
      }
    }

    function renderIncomeList(records, currencySymbol) {
      const listEl = document.getElementById('income-list');
      const filtered = filterRecords(records, currentFilter);
      const countEl = document.getElementById('record-count');
      
      countEl.textContent = `(${filtered.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`;

      if (filtered.length === 0) {
        listEl.innerHTML = `
          <div class="p-8 text-center text-slate-500">
            <span class="text-4xl block mb-2">üì≠</span>
            ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ
          </div>
        `;
        return;
      }

      // Sort by date descending
      const sorted = [...filtered].sort((a, b) => new Date(b.date) - new Date(a.date));

      const existingItems = new Map(
        [...listEl.querySelectorAll('.income-item')].map(el => [el.dataset.id, el])
      );

      const fragment = document.createDocumentFragment();
      
      sorted.forEach(record => {
        const icon = categoryIcons[record.category] || 'üìå';
        const catName = categoryNames[record.category] || '‡∏≠‡∏∑‡πà‡∏ô‡πÜ';
        
        if (existingItems.has(record.__backendId)) {
          const el = existingItems.get(record.__backendId);
          el.querySelector('.amount').textContent = formatCurrency(record.amount, currencySymbol);
          el.querySelector('.description').textContent = record.description;
          el.querySelector('.category').textContent = `${icon} ${catName}`;
          el.querySelector('.date').textContent = formatDate(record.date);
          fragment.appendChild(el);
          existingItems.delete(record.__backendId);
        } else {
          const div = document.createElement('div');
          div.className = 'income-item income-card p-4 flex items-center justify-between gap-4 hover:bg-slate-700/30 transition-all';
          div.dataset.id = record.__backendId;
          div.innerHTML = `
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-1">
                <span class="amount text-emerald-400 font-bold text-lg">${formatCurrency(record.amount, currencySymbol)}</span>
                <span class="category text-xs bg-slate-700/50 px-2 py-1 rounded-full text-slate-300">${icon} ${catName}</span>
              </div>
              <p class="description text-white truncate">${record.description}</p>
              <p class="date text-slate-500 text-sm">${formatDate(record.date)}</p>
            </div>
            <button class="delete-btn p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all" data-id="${record.__backendId}">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
              </svg>
            </button>
          `;
          fragment.appendChild(div);
        }
      });

      existingItems.forEach(el => el.remove());
      listEl.innerHTML = '';
      listEl.appendChild(fragment);

      // Add delete event listeners
      listEl.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const id = btn.dataset.id;
          recordToDelete = records.find(r => r.__backendId === id);
          if (recordToDelete) {
            document.getElementById('delete-modal').classList.remove('hidden');
          }
        });
      });
    }

    // Data handler
    const dataHandler = {
      onDataChanged(data) {
        incomeRecords = data;
        const config = window.elementSdk?.config || defaultConfig;
        calculateTotals(data, config.currency_symbol || defaultConfig.currency_symbol);
        renderIncomeList(data, config.currency_symbol || defaultConfig.currency_symbol);
        
        // Check limit
        const warningEl = document.getElementById('limit-warning');
        const submitBtn = document.getElementById('submit-btn');
        if (data.length >= 999) {
          warningEl.classList.remove('hidden');
          submitBtn.disabled = true;
        } else {
          warningEl.classList.add('hidden');
          submitBtn.disabled = false;
        }
      }
    };

    // Element SDK setup
    async function onConfigChange(config) {
      const title = config.app_title || defaultConfig.app_title;
      const currencySymbol = config.currency_symbol || defaultConfig.currency_symbol;
      
      document.getElementById('app-title').textContent = title;
      
      // Recalculate with new currency
      calculateTotals(incomeRecords, currencySymbol);
      renderIncomeList(incomeRecords, currencySymbol);
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['app_title', config.app_title || defaultConfig.app_title],
        ['currency_symbol', config.currency_symbol || defaultConfig.currency_symbol]
      ]);
    }

    // Initialize
    async function init() {
      // Set default date to today
      document.getElementById('date').valueAsDate = new Date();

      // Initialize Element SDK
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      }

      // Initialize Data SDK
      if (window.dataSdk) {
        const result = await window.dataSdk.init(dataHandler);
        if (!result.isOk) {
          console.error('Failed to initialize data SDK');
        }
      }

      // Form submission
      document.getElementById('income-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        if (incomeRecords.length >= 999) {
          return;
        }

        const submitBtn = document.getElementById('submit-btn');
        const originalText = submitBtn.textContent;
        submitBtn.disabled = true;
        submitBtn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...';

        const amount = parseFloat(document.getElementById('amount').value);
        const description = document.getElementById('description').value.trim();
        const category = document.getElementById('category').value;
        const date = document.getElementById('date').value;

        if (amount > 0 && description && date) {
          const result = await window.dataSdk.create({
            amount,
            description,
            category,
            date
          });

          if (result.isOk) {
            document.getElementById('income-form').reset();
            document.getElementById('date').valueAsDate = new Date();
          }
        }

        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      });

      // Filter tabs
      document.querySelectorAll('.filter-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          currentFilter = tab.dataset.filter;
          
          document.querySelectorAll('.filter-tab').forEach(t => {
            t.classList.remove('bg-slate-700/50', 'text-white');
            t.classList.add('text-slate-400');
          });
          tab.classList.add('bg-slate-700/50', 'text-white');
          tab.classList.remove('text-slate-400');

          const config = window.elementSdk?.config || defaultConfig;
          renderIncomeList(incomeRecords, config.currency_symbol || defaultConfig.currency_symbol);
        });
      });

      // Delete modal handlers
      document.getElementById('cancel-delete').addEventListener('click', () => {
        document.getElementById('delete-modal').classList.add('hidden');
        recordToDelete = null;
      });

      document.getElementById('confirm-delete').addEventListener('click', async () => {
        if (recordToDelete && window.dataSdk) {
          const confirmBtn = document.getElementById('confirm-delete');
          confirmBtn.disabled = true;
          confirmBtn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö...';

          const result = await window.dataSdk.delete(recordToDelete);
          
          confirmBtn.disabled = false;
          confirmBtn.textContent = '‡∏•‡∏ö';
          document.getElementById('delete-modal').classList.add('hidden');
          recordToDelete = null;
        }
      });

      // Close modal on backdrop click
      document.getElementById('delete-modal').addEventListener('click', (e) => {
        if (e.target.id === 'delete-modal') {
          document.getElementById('delete-modal').classList.add('hidden');
          recordToDelete = null;
        }
      });
    }

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c835be8f637731f',t:'MTc3MDEzNjcxMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>            color: #e2e8f0;
        }
        
        .dark-mode .ai-input:focus {
            background: rgba(30, 41, 59, 1);
            border-color: var(--primary-color);
        }
        
        .dark-mode .text-gray-800 {
            color: #e2e8f0 !important;
        }
        
        .dark-mode .text-gray-600 {
            color: #94a3b8 !important;
        }
        
        .dark-mode .text-gray-500 {
            color: #64748b !important;
        }
        
        .dark-mode .bg-white {
            background: rgba(30, 41, 59, 0.95) !important;
        }
        
        .dark-mode .border-gray-200 {
            border-color: #475569 !important;
        }
        
        .dark-mode .bg-gray-50 {
            background: rgba(51, 65, 85, 0.5) !important;
        }
        
        .dark-mode .bg-blue-50 {
            background: rgba(30, 58, 138, 0.2) !important;
        }
        
        .dark-mode .ai-stat-card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(51, 65, 85, 0.9));
            border: 1px solid rgba(71, 85, 105, 0.3);
        }
        .gradient-bg { 
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); 
        }
        .card-shadow { 
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .glass-effect {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .switch { 
            position: relative; 
            display: inline-block; 
            width: 60px; 
            height: 34px; 
        }
        .switch input { 
            opacity: 0; 
            width: 0; 
            height: 0; 
        }
        .slider { 
            position: absolute; 
            cursor: pointer; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background: linear-gradient(135deg, #e5e7eb, #d1d5db);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            border-radius: 34px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        .slider:before { 
            position: absolute; 
            content: ""; 
            height: 26px; 
            width: 26px; 
            left: 4px; 
            bottom: 4px; 
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        input:checked + .slider { 
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        input:checked + .slider:before { 
            transform: translateX(26px); 
        }
        .ai-button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 16px;
            color: white;
            font-weight: 600;
            letter-spacing: 0.025em;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .ai-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .ai-button:active {
            transform: translateY(0);
        }
        .ai-input {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(8px);
        }
        .ai-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            background: rgba(255, 255, 255, 1);
        }
        .ai-card {
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .nav-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 12px;
        }
        .nav-btn:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }
        .period-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 12px;
            font-weight: 600;
            letter-spacing: 0.025em;
        }
        .period-btn:hover {
            transform: translateY(-1px);
        }
        .ai-stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(248,250,252,0.9));
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .ai-stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen">
    <!-- Navigation -->
    <nav class="gradient-bg text-white p-4 sticky top-0 z-50 glass-effect">
        <div class="max-w-md mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold tracking-tight">üí∞ ‡πÅ‡∏≠‡∏õ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô Smart</h1>
            <div class="text-sm font-medium" id="currentDateTime"></div>
        </div>
    </nav>

    <!-- Bottom Navigation -->
    <div class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-lg border-t border-gray-200/50 z-50">
        <div class="max-w-md mx-auto flex justify-around py-2">
            <button onclick="showPage('home')" class="nav-btn flex flex-col items-center p-3 text-purple-600" id="nav-home">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
                <span class="text-xs mt-1 font-medium">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
            </button>
            <button onclick="showPage('graph')" class="nav-btn flex flex-col items-center p-3 text-gray-400" id="nav-graph">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                </svg>
                <span class="text-xs mt-1 font-medium">‡∏Å‡∏£‡∏≤‡∏ü</span>
            </button>
            <button onclick="showPage('list')" class="nav-btn flex flex-col items-center p-3 text-gray-400" id="nav-list">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
                </svg>
                <span class="text-xs mt-1 font-medium">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
            </button>
            <button onclick="showPage('goals')" class="nav-btn flex flex-col items-center p-3 text-gray-400" id="nav-goals">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                <span class="text-xs mt-1 font-medium">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</span>
            </button>
            <button onclick="showPage('settings')" class="nav-btn flex flex-col items-center p-3 text-gray-400" id="nav-settings">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                </svg>
                <span class="text-xs mt-1 font-medium">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
            </button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="max-w-md mx-auto pb-20 pt-4">
        
        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å -->
        <div id="home-page" class="page px-4">
            <!-- ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -->
            <div class="gradient-bg text-white rounded-3xl p-6 mb-6 card-shadow">
                <h2 class="text-lg font-semibold mb-2 tracking-tight">üí∞ ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                <div class="text-4xl font-bold tracking-tight" id="totalSavings">‡∏ø0</div>
                <div class="text-sm opacity-90 mt-2 font-medium">‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="lastUpdate">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span></div>
            </div>

            <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô -->
            <div class="ai-card p-6 card-shadow mb-6">
                <h3 class="text-lg font-bold mb-4 text-gray-800 tracking-tight">‚ú® ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h3>
                
                <form id="savingsForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="amount" class="w-full p-4 ai-input focus:outline-none font-medium" placeholder="0" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                        <select id="category" class="w-full p-4 ai-input focus:outline-none font-medium" required>
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                            <option value="‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô">üíº ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
                            <option value="‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©">üí∞ ‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</option>
                            <option value="‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á">üõçÔ∏è ‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á</option>
                            <option value="‡∏•‡∏á‡∏ó‡∏∏‡∏ô">üìà ‡∏•‡∏á‡∏ó‡∏∏‡∏ô</option>
                            <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">üìù ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                        </select>
                    </div>
                    
                    <button type="submit" id="saveButton" class="w-full ai-button py-4 font-bold tracking-tight">
                        ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°
                    </button>
                    
                    <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå -->
                    <div id="offlineWarning" class="hidden bg-amber-50 border border-amber-200 rounded-xl p-3 text-center">
                        <div class="text-amber-700 font-semibold text-sm">üì± ‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå - ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ</div>
                    </div>
                </form>
            </div>


        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ -->
        <div id="list-page" class="page px-4 hidden">
            <div class="ai-card p-6 card-shadow">
                <h2 class="text-lg font-bold mb-4 text-gray-800 tracking-tight">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                <div id="allSavings" class="space-y-3">
                    <div class="text-gray-500 text-center py-4 font-medium">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</div>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏£‡∏≤‡∏ü -->
        <div id="graph-page" class="page px-4 hidden">
            <div class="ai-card p-6 card-shadow mb-6">
                <h2 class="text-lg font-bold mb-4 text-gray-800 tracking-tight">üìä ‡∏Å‡∏£‡∏≤‡∏ü‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</h2>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ -->
                <div class="flex space-x-2 mb-6">
                    <button onclick="changeChartPeriod('day')" class="period-btn px-4 py-2 bg-purple-600 text-white text-sm" id="day-btn">‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</button>
                    <button onclick="changeChartPeriod('week')" class="period-btn px-4 py-2 bg-gray-200 text-gray-700 text-sm" id="week-btn">‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</button>
                    <button onclick="changeChartPeriod('month')" class="period-btn px-4 py-2 bg-gray-200 text-gray-700 text-sm" id="month-btn">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
                </div>
                
                <div class="h-64">
                    <canvas id="savingsChart"></canvas>
                </div>
            </div>

            <!-- ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏° -->
            <div class="ai-card p-6 card-shadow">
                <h3 class="text-lg font-bold mb-4 text-gray-800 tracking-tight">üìà ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="ai-stat-card text-center p-4">
                        <div class="text-2xl font-bold text-green-600" id="avgDaily">‡∏ø0</div>
                        <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</div>
                    </div>
                    <div class="ai-stat-card text-center p-4">
                        <div class="text-2xl font-bold text-blue-600" id="thisMonth">‡∏ø0</div>
                        <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ -->
        <div id="goals-page" class="page px-4 hidden">
            <div class="ai-card p-6 card-shadow mb-6">
                <h2 class="text-lg font-bold mb-4 text-gray-800 tracking-tight">üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</h2>
                
                <!-- Cloud Pocket -->
                <div class="gradient-bg text-white rounded-2xl p-4 mb-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-bold tracking-tight">‚òÅÔ∏è Cloud Pocket</h3>
                            <p class="text-sm opacity-90 font-medium">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
                        </div>
                        <div class="text-right">
                            <div class="text-xl font-bold tracking-tight" id="cloudProgress">‡∏ø0</div>
                            <div class="text-xs opacity-80 font-medium">‡∏à‡∏≤‡∏Å ‡∏ø10,000</div>
                        </div>
                    </div>
                    <div class="mt-3 bg-white bg-opacity-20 rounded-full h-2">
                        <div class="bg-white rounded-full h-2 transition-all duration-500" id="cloudProgressBar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà -->
                <form id="goalForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</label>
                        <input type="text" id="goalName" class="w-full p-4 ai-input focus:outline-none font-medium" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏∑‡πâ‡∏≠‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡∏°‡πà" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="goalAmount" class="w-full p-4 ai-input focus:outline-none font-medium" placeholder="0" required>
                    </div>
                    
                    <button type="submit" id="goalButton" class="w-full ai-button py-4 font-bold tracking-tight">
                        ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                    </button>
                    
                    <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå -->
                    <div id="goalOfflineWarning" class="hidden bg-amber-50 border border-amber-200 rounded-xl p-3 text-center">
                        <div class="text-amber-700 font-semibold text-sm">üì± ‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå - ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÑ‡∏î‡πâ</div>
                    </div>
                </form>
            </div>

            <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ -->
            <div class="ai-card p-6 card-shadow">
                <h3 class="text-lg font-bold mb-4 text-gray-800 tracking-tight">üìã ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                <div id="goalsList" class="space-y-4">
                    <div class="text-gray-500 text-center py-4 font-medium">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</div>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ -->
        <div id="settings-page" class="page px-4 hidden">
            <div class="ai-card p-6 card-shadow mb-6">
                <h2 class="text-lg font-bold mb-6 text-gray-800 tracking-tight">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h2>
                
                <!-- ‡∏™‡∏ß‡∏¥‡∏ó‡∏ä‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå/‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå -->
                <div class="flex items-center justify-between py-4 border-b border-gray-100">
                    <div>
                        <h3 class="font-semibold text-gray-800 tracking-tight">üåê ‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</h3>
                        <p class="text-sm text-gray-500 font-medium">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Cloud Pocket</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="onlineSwitch" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ -->
                <div class="py-4 border-b border-gray-100">
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-green-500 rounded-full mr-3" id="connectionStatus"></div>
                        <span class="text-sm font-semibold" id="connectionText">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß</span>
                    </div>
                </div>

                <!-- ‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå -->
                <div class="py-4 border-b border-gray-100" id="offlineSection" style="display: none;">
                    <div class="bg-amber-50 border border-amber-200 rounded-xl p-4">
                        <div class="flex items-center mb-2">
                            <div class="text-2xl mr-3">üì±</div>
                            <div>
                                <h3 class="font-bold text-amber-800 tracking-tight">‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå</h3>
                                <p class="text-sm text-amber-700 font-medium">‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏à‡∏≥‡∏Å‡∏±‡∏î</p>
                            </div>
                        </div>
                        <p class="text-xs text-amber-600 font-medium">‚Ä¢ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏±‡∏ö Cloud ‡πÑ‡∏î‡πâ</p>
                        <p class="text-xs text-amber-600 font-medium">‚Ä¢ ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</p>
                    </div>
                </div>

                <!-- ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô -->
                <div class="py-4 border-b border-gray-100">
                    <h3 class="font-semibold text-gray-800 mb-2 tracking-tight">üé® ‡∏ò‡∏µ‡∏°‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h3>
                    <div class="flex items-center">
                        <div class="w-4 h-4 rounded-full mr-3" style="background: var(--primary-color)"></div>
                        <span class="text-sm text-gray-600 font-medium" id="currentTheme">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1 font-medium">‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
                </div>

                <!-- ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô -->
                <div class="py-4">
                    <h3 class="font-semibold text-gray-800 mb-2 tracking-tight">üöÄ ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
                    <div class="flex items-center justify-between">
                        <span class="text-gray-600 font-semibold">v2.4.0</span>
                        <span class="text-xs bg-green-100 text-green-800 px-3 py-1 rounded-full font-bold">Smart Enhanced</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1 font-medium" id="updateDate">‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                </div>
            </div>

            <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏≠‡∏õ -->
            <div class="ai-card p-6 card-shadow">
                <h3 class="text-lg font-bold mb-4 text-gray-800 tracking-tight">ü§ñ ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏õ</h3>
                <div class="space-y-3 text-sm text-gray-600 font-medium">
                    <p>üí∞ ‡πÅ‡∏≠‡∏õ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô Smart ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</p>
                    <p>üìä ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏°‡∏±‡∏¢‡πÉ‡∏´‡∏°‡πà</p>
                    <p>üéØ ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</p>
                    <p>‚òÅÔ∏è ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏±‡∏ö Cloud Pocket</p>
                    <p>üîÑ ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤/‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏ö‡∏ö‡∏ñ‡∏≤‡∏ß‡∏£</p>
                    <p>üåô Dark Mode ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ñ‡∏ô‡∏≠‡∏°‡∏™‡∏≤‡∏¢‡∏ï‡∏≤</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏≠‡∏õ
        let savingsData = JSON.parse(localStorage.getItem('savingsData')) || [];
        let oldSavingsData = JSON.parse(localStorage.getItem('oldSavingsData')) || []; // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢
        let goalsData = JSON.parse(localStorage.getItem('goalsData')) || [];
        let totalSavings = parseFloat(localStorage.getItem('totalSavings')) || 0;
        let currentChart = null;
        let currentPeriod = 'day';
        let isOnlineMode = JSON.parse(localStorage.getItem('isOnlineMode')) !== false; // default true

        // ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô (7 ‡∏ß‡∏±‡∏ô) - AI Enhanced
        const dailyThemes = [
            { primary: '#667eea', secondary: '#764ba2', name: '‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå - Neural Purple' }, // ‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå
            { primary: '#ffeaa7', secondary: '#fab1a0', name: '‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå - Quantum Gold' }, // ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå
            { primary: '#fd79a8', secondary: '#e84393', name: '‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ - Cyber Pink' }, // ‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£
            { primary: '#00b894', secondary: '#00a085', name: '‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò - AI Mint' }, // ‡∏û‡∏∏‡∏ò
            { primary: '#fdcb6e', secondary: '#e17055', name: '‡∏ß‡∏±‡∏ô‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ - Digital Orange' }, // ‡∏û‡∏§‡∏´‡∏±‡∏™
            { primary: '#6c5ce7', secondary: '#a29bfe', name: '‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå - Tech Violet' }, // ‡∏®‡∏∏‡∏Å‡∏£‡πå
            { primary: '#74b9ff', secondary: '#0984e3', name: '‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå - Cloud Blue' }  // ‡πÄ‡∏™‡∏≤‡∏£‡πå
        ];

        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
        function setDailyTheme() {
            const today = new Date().getDay();
            const theme = dailyThemes[today];
            
            document.documentElement.style.setProperty('--primary-color', theme.primary);
            document.documentElement.style.setProperty('--secondary-color', theme.secondary);
            
            const style = document.createElement('style');
            style.textContent = `
                .text-purple-600 { color: ${theme.primary} !important; }
                .bg-purple-600 { background-color: ${theme.primary} !important; }
                .bg-purple-50 { background-color: ${theme.primary}20 !important; }
                .border-purple-500 { border-color: ${theme.primary} !important; }
                .focus\\:ring-purple-500:focus { --tw-ring-color: ${theme.primary} !important; }
                input:checked + .slider { background: linear-gradient(135deg, ${theme.primary}, ${theme.secondary}) !important; }
            `;
            document.head.appendChild(style);
        }

        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤)
        function resetData() {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå
            if (!isOnlineMode) {
                showErrorMessage('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå! üì±');
                return;
            }
            
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢')) {
                // ‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤
                oldSavingsData = [...oldSavingsData, ...savingsData];
                localStorage.setItem('oldSavingsData', JSON.stringify(oldSavingsData));
                
                // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                savingsData = [];
                totalSavings = 0;
                
                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
                localStorage.setItem('savingsData', JSON.stringify(savingsData));
                localStorage.setItem('totalSavings', totalSavings.toString());
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
                updateTotalSavings();
                updateRecentSavings();
                updateCloudProgress();
                updateChart();
                
                showSuccessMessage('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß üîÑ');
            }
        }

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå/‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå
        function updateOnlineStatus() {
            const offlineSection = document.getElementById('offlineSection');
            const statusDot = document.getElementById('connectionStatus');
            const statusText = document.getElementById('connectionText');
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
            if (isOnlineMode) {
                offlineSection.style.display = 'none';
                statusDot.className = 'w-3 h-3 bg-green-500 rounded-full mr-3';
                statusText.textContent = '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß';
            } else {
                offlineSection.style.display = 'block';
                statusDot.className = 'w-3 h-3 bg-amber-500 rounded-full mr-3';
                statusText.textContent = '‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå';
            }
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ
            updateUIForOfflineMode();
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó UI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå
        function updateUIForOfflineMode() {
            const saveButton = document.getElementById('saveButton');
            const goalButton = document.getElementById('goalButton');
            
            const offlineWarning = document.getElementById('offlineWarning');
            const goalOfflineWarning = document.getElementById('goalOfflineWarning');
            
            if (!isOnlineMode) {
                // ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                if (saveButton) {
                    saveButton.classList.add('opacity-50', 'cursor-not-allowed');
                    saveButton.disabled = true;
                }
                if (goalButton) {
                    goalButton.classList.add('opacity-50', 'cursor-not-allowed');
                    goalButton.disabled = true;
                }
                
                if (offlineWarning) offlineWarning.classList.remove('hidden');
                if (goalOfflineWarning) goalOfflineWarning.classList.remove('hidden');
            } else {
                // ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                if (saveButton) {
                    saveButton.classList.remove('opacity-50', 'cursor-not-allowed');
                    saveButton.disabled = false;
                }
                if (goalButton) {
                    goalButton.classList.remove('opacity-50', 'cursor-not-allowed');
                    goalButton.disabled = false;
                }
                
                if (offlineWarning) offlineWarning.classList.add('hidden');
                if (goalOfflineWarning) goalOfflineWarning.classList.add('hidden');
            }
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        function updateDateTime() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.getElementById('currentDateTime').textContent = now.toLocaleDateString('th-TH', options);
            
            const updateDateElement = document.getElementById('updateDate');
            if (updateDateElement) {
                updateDateElement.textContent = `‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${now.toLocaleDateString('th-TH')}`;
            }
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤
        function showPage(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-purple-600');
                btn.classList.add('text-gray-400');
            });
            
            document.getElementById(page + '-page').classList.remove('hidden');
            document.getElementById('nav-' + page).classList.remove('text-gray-400');
            document.getElementById('nav-' + page).classList.add('text-purple-600');
            
            if (page === 'graph') {
                updateChart();
            } else if (page === 'goals') {
                updateGoalsDisplay();
            } else if (page === 'list') {
                updateAllSavings();
            }
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function updateTotalSavings() {
            document.getElementById('totalSavings').textContent = '‡∏ø' + totalSavings.toLocaleString();
            document.getElementById('lastUpdate').textContent = new Date().toLocaleDateString('th-TH');
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
        function updateRecentSavings() {
            const container = document.getElementById('recentSavings');
            
            if (savingsData.length === 0) {
                container.innerHTML = '<div class="text-gray-500 text-center py-4 font-medium">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</div>';
                return;
            }
            
            const recentItems = savingsData.slice(0, 5);
            container.innerHTML = recentItems.map(item => `
                <div class="flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-100">
                    <div>
                        <div class="font-bold text-gray-800">‡∏ø${item.amount.toLocaleString()}</div>
                        <div class="text-sm text-gray-600 font-medium">${item.category}</div>
                    </div>
                    <div class="text-xs text-gray-500 font-medium">${item.displayDate}</div>
                </div>
            `).join('');
        }

        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏£‡∏≤‡∏ü
        function changeChartPeriod(period) {
            currentPeriod = period;
            
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.classList.remove('bg-purple-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            document.getElementById(period + '-btn').classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById(period + '-btn').classList.add('bg-purple-600', 'text-white');
            
            updateChart();
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏£‡∏≤‡∏ü (‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡∏°‡πà)
        function updateChart() {
            const ctx = document.getElementById('savingsChart').getContext('2d');
            
            if (currentChart) {
                currentChart.destroy();
            }
            
            const currentData = getChartData(currentPeriod, savingsData);
            const oldData = getChartData(currentPeriod, oldSavingsData);
            
            currentChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: currentData.labels,
                    datasets: [
                        {
                            label: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ (‡∏ö‡∏≤‡∏ó)',
                            data: oldData.data,
                            backgroundColor: 'rgba(156, 163, 175, 0.6)',
                            borderColor: 'rgba(156, 163, 175, 0.8)',
                            borderWidth: 1,
                            borderRadius: 8
                        },
                        {
                            label: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó)',
                            data: currentData.data,
                            backgroundColor: 'rgba(102, 126, 234, 0.8)',
                            borderColor: 'rgba(102, 126, 234, 1)',
                            borderWidth: 1,
                            borderRadius: 8
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            labels: {
                                font: {
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '‡∏ø' + value.toLocaleString();
                                },
                                font: {
                                    weight: 'bold'
                                }
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    weight: 'bold'
                                }
                            }
                        }
                    }
                }
            });
            
            updateStats();
        }

        // ‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏£‡∏≤‡∏ü
        function getChartData(period, dataSource) {
            const now = new Date();
            const labels = [];
            const data = [];
            
            if (period === 'day') {
                for (let i = 6; i >= 0; i--) {
                    const date = new Date(now);
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toISOString().split('T')[0];
                    
                    labels.push(date.toLocaleDateString('th-TH', { weekday: 'short' }));
                    
                    const dayTotal = dataSource
                        .filter(item => item.date.startsWith(dateStr))
                        .reduce((sum, item) => sum + item.amount, 0);
                    
                    data.push(dayTotal);
                }
            } else if (period === 'week') {
                for (let i = 3; i >= 0; i--) {
                    const weekStart = new Date(now);
                    weekStart.setDate(weekStart.getDate() - (i * 7) - weekStart.getDay());
                    const weekEnd = new Date(weekStart);
                    weekEnd.setDate(weekEnd.getDate() + 6);
                    
                    labels.push(`‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ${4-i}`);
                    
                    const weekTotal = dataSource
                        .filter(item => {
                            const itemDate = new Date(item.date);
                            return itemDate >= weekStart && itemDate <= weekEnd;
                        })
                        .reduce((sum, item) => sum + item.amount, 0);
                    
                    data.push(weekTotal);
                }
            } else if (period === 'month') {
                for (let i = 5; i >= 0; i--) {
                    const month = new Date(now);
                    month.setMonth(month.getMonth() - i);
                    
                    labels.push(month.toLocaleDateString('th-TH', { month: 'short' }));
                    
                    const monthTotal = dataSource
                        .filter(item => {
                            const itemDate = new Date(item.date);
                            return itemDate.getMonth() === month.getMonth() && 
                                   itemDate.getFullYear() === month.getFullYear();
                        })
                        .reduce((sum, item) => sum + item.amount, 0);
                    
                    data.push(monthTotal);
                }
            }
            
            return { labels, data };
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
        function updateStats() {
            const now = new Date();
            
            const thirtyDaysAgo = new Date(now);
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            
            const last30Days = savingsData.filter(item => new Date(item.date) >= thirtyDaysAgo);
            const avgDaily = last30Days.reduce((sum, item) => sum + item.amount, 0) / 30;
            
            document.getElementById('avgDaily').textContent = '‡∏ø' + Math.round(avgDaily).toLocaleString();
            
            const thisMonthTotal = savingsData
                .filter(item => {
                    const itemDate = new Date(item.date);
                    return itemDate.getMonth() === now.getMonth() && 
                           itemDate.getFullYear() === now.getFullYear();
                })
                .reduce((sum, item) => sum + item.amount, 0);
            
            document.getElementById('thisMonth').textContent = '‡∏ø' + thisMonthTotal.toLocaleString();
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
        function updateGoalsDisplay() {
            const container = document.getElementById('goalsList');
            
            if (goalsData.length === 0) {
                container.innerHTML = '<div class="text-gray-500 text-center py-4 font-medium">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</div>';
                return;
            }
            
            container.innerHTML = goalsData.map(goal => {
                const progress = Math.min((goal.currentAmount / goal.targetAmount) * 100, 100);
                return `
                    <div class="border border-gray-200 rounded-xl p-4 bg-gradient-to-r from-white to-blue-50">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-bold text-gray-800 tracking-tight">${goal.name}</h4>
                            <button onclick="deleteGoal(${goal.id})" class="text-red-500 text-sm hover:bg-red-50 p-1 rounded">üóëÔ∏è</button>
                        </div>
                        <div class="flex justify-between text-sm text-gray-600 mb-2 font-semibold">
                            <span>‡∏ø${goal.currentAmount.toLocaleString()}</span>
                            <span>‡∏ø${goal.targetAmount.toLocaleString()}</span>
                        </div>
                        <div class="bg-gray-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-purple-500 to-blue-500 rounded-full h-2 transition-all duration-500" style="width: ${progress}%"></div>
                        </div>
                        <div class="text-xs text-gray-500 mt-1 font-semibold">${progress.toFixed(1)}% ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>
                    </div>
                `;
            }).join('');
        }

        // ‡∏•‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
        function deleteGoal(goalId) {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå
            if (!isOnlineMode) {
                showErrorMessage('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå! üì±');
                return;
            }
            
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                goalsData = goalsData.filter(goal => goal.id !== goalId);
                localStorage.setItem('goalsData', JSON.stringify(goalsData));
                updateGoalsDisplay();
                showSuccessMessage('‡∏•‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! üóëÔ∏è');
            }
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Cloud Progress
        function updateCloudProgress() {
            const cloudTarget = 10000;
            const progress = Math.min((totalSavings / cloudTarget) * 100, 100);
            
            document.getElementById('cloudProgress').textContent = '‡∏ø' + totalSavings.toLocaleString();
            document.getElementById('cloudProgressBar').style.width = progress + '%';
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
        function updateGoalsInProgress() {
            goalsData.forEach(goal => {
                goal.currentAmount = Math.min(totalSavings, goal.targetAmount);
            });
            localStorage.setItem('goalsData', JSON.stringify(goalsData));
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        function showSuccessMessage(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl shadow-lg z-50 font-bold tracking-tight';
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
        function showErrorMessage(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-red-500 to-pink-500 text-white px-6 py-3 rounded-xl shadow-lg z-50 font-bold tracking-tight';
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ event listeners
        function setupEventListeners() {
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°
            const savingsForm = document.getElementById('savingsForm');
            if (savingsForm) {
                savingsForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå
                    if (!isOnlineMode) {
                        showErrorMessage('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå! üì±');
                        return;
                    }
                    
                    const amount = parseFloat(document.getElementById('amount').value);
                    const category = document.getElementById('category').value;
                    
                    if (amount > 0 && category) {
                        const saving = {
                            id: Date.now(),
                            amount: amount,
                            category: category,
                            date: new Date().toISOString(),
                            displayDate: new Date().toLocaleDateString('th-TH')
                        };
                        
                        savingsData.unshift(saving);
                        totalSavings += amount;
                        
                        localStorage.setItem('savingsData', JSON.stringify(savingsData));
                        localStorage.setItem('totalSavings', totalSavings.toString());
                        
                        updateTotalSavings();
                        updateRecentSavings();
                        updateCloudProgress();
                        updateGoalsInProgress();
                        
                        document.getElementById('savingsForm').reset();
                        
                        showSuccessMessage('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! üéâ');
                    }
                });
            }

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
            const goalForm = document.getElementById('goalForm');
            if (goalForm) {
                goalForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå
                    if (!isOnlineMode) {
                        showErrorMessage('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå! üì±');
                        return;
                    }
                    
                    const name = document.getElementById('goalName').value;
                    const amount = parseFloat(document.getElementById('goalAmount').value);
                    
                    if (name && amount > 0) {
                        const goal = {
                            id: Date.now(),
                            name: name,
                            targetAmount: amount,
                            currentAmount: 0,
                            createdDate: new Date().toISOString()
                        };
                        
                        goalsData.push(goal);
                        localStorage.setItem('goalsData', JSON.stringify(goalsData));
                        
                        updateGoalsDisplay();
                        document.getElementById('goalForm').reset();
                        
                        showSuccessMessage('‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! üéØ');
                    }
                });
            }

            // ‡∏™‡∏ß‡∏¥‡∏ó‡∏ä‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå/‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå
            const onlineSwitch = document.getElementById('onlineSwitch');
            if (onlineSwitch) {
                onlineSwitch.addEventListener('change', function() {
                    isOnlineMode = this.checked;
                    localStorage.setItem('isOnlineMode', JSON.stringify(isOnlineMode));
                    
                    updateOnlineStatus();
                    
                    if (isOnlineMode) {
                        showSuccessMessage('‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏•‡πâ‡∏ß! üåê');
                    } else {
                        showSuccessMessage('‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå üì±');
                    }
                });
            }
        }

        // ‡∏£‡∏∞‡∏ö‡∏ö Dark Mode ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
        function checkAutoTheme() {
            const now = new Date();
            const hour = now.getHours();
            
            // 6 ‡πÇ‡∏°‡∏á‡πÄ‡∏ä‡πâ‡∏≤ (6) ‡∏ñ‡∏∂‡∏á 1 ‡∏ó‡∏∏‡πà‡∏° (13) = ‡∏™‡∏ß‡πà‡∏≤‡∏á
            // ‡∏´‡∏•‡∏±‡∏á 1 ‡∏ó‡∏∏‡πà‡∏° (13) ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á‡πÄ‡∏ä‡πâ‡∏≤ = ‡∏°‡∏∑‡∏î
            const shouldBeDark = hour >= 13 || hour < 6;
            
            if (shouldBeDark && !document.body.classList.contains('dark-mode')) {
                document.body.classList.add('dark-mode');
                localStorage.setItem('isDarkMode', 'true');
            } else if (!shouldBeDark && document.body.classList.contains('dark-mode')) {
                document.body.classList.remove('dark-mode');
                localStorage.setItem('isDarkMode', 'false');
            }
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function updateAllSavings() {
            const container = document.getElementById('allSavings');
            
            if (savingsData.length === 0) {
                container.innerHTML = '<div class="text-gray-500 text-center py-4 font-medium">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</div>';
                return;
            }
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤
            const sortedData = [...savingsData].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            container.innerHTML = sortedData.map(item => `
                <div class="flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-100">
                    <div class="flex-1">
                        <div class="font-bold text-gray-800">‡∏ø${item.amount.toLocaleString()}</div>
                        <div class="text-sm text-gray-600 font-medium">${item.category}</div>
                        <div class="text-xs text-gray-500 font-medium">${item.displayDate}</div>
                    </div>
                    <button onclick="deleteSaving(${item.id})" class="text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                </div>
            `).join('');
        }

        // ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°
        function deleteSaving(savingId) {
            if (!isOnlineMode) {
                showErrorMessage('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå! üì±');
                return;
            }
            
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                const savingToDelete = savingsData.find(item => item.id === savingId);
                if (savingToDelete) {
                    // ‡∏•‡∏î‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    totalSavings -= savingToDelete.amount;
                    
                    // ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                    savingsData = savingsData.filter(item => item.id !== savingId);
                    
                    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    localStorage.setItem('savingsData', JSON.stringify(savingsData));
                    localStorage.setItem('totalSavings', totalSavings.toString());
                    
                    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
                    updateTotalSavings();
                    updateAllSavings();
                    updateCloudProgress();
                    updateGoalsInProgress();
                    
                    showSuccessMessage('‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! üóëÔ∏è');
                }
            }
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ
        function initApp() {
            setDailyTheme();
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Dark Mode ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
            checkAutoTheme();
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setInterval(checkAutoTheme, 30000);
            
            updateDateTime();
            setInterval(updateDateTime, 60000);
            
            document.getElementById('onlineSwitch').checked = isOnlineMode;
            updateOnlineStatus();
            
            setupEventListeners();
            
            updateTotalSavings();
            updateRecentSavings();
            updateAllSavings();
            updateCloudProgress();
            updateGoalsDisplay();
            
            const today = new Date().getDay();
            const currentThemeElement = document.getElementById('currentTheme');
            if (currentThemeElement) {
                currentThemeElement.textContent = dailyThemes[today].name;
            }
            
            showPage('home');
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏≠‡∏õ
        initApp();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'972bc21905a47328',t:'MTc1NTc5NjM3Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
