<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cold Pocket - ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Prompt', sans-serif;
            background: linear-gradient(135deg, #E3F2FD 0%, #F3E5F5 50%, #E8F5E8 100%);
            background-image: 
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%234285F4' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0 11.046 8.954 20 20 20s20-8.954 20-20-8.954-20-20-20-20 8.954-20 20z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"),
                url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%2334A853' fill-opacity='0.08'%3E%3Cpath d='M20 20c0-5.5-4.5-10-10-10s-10 4.5-10 10 4.5 10 10 10 10-4.5 10-10zm10-10c0 5.5 4.5 10 10 10s10-4.5 10-10-4.5-10-10-10-10 4.5-10 10z'/%3E%3C/g%3E%3C/svg%3E");
            min-height: 100vh;
        }
        .mothers-day-banner {
            background: linear-gradient(45deg, #FFB6C1, #98FB98, #87CEEB);
            background-size: 300% 300%;
            animation: gradientShift 6s ease infinite;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .jasmine-flower {
            display: inline-block;
            margin: 0 5px;
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .piggy-bank {
            filter: drop-shadow(0px 4px 6px rgba(0, 0, 0, 0.1));
            transition: transform 0.3s ease;
        }
        .piggy-bank:hover {
            transform: scale(1.05);
        }
        .coin-animation {
            animation: coinDrop 1s forwards;
            position: absolute;
        }
        @keyframes coinDrop {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100px) rotate(360deg);
                opacity: 0;
            }
        }
        .category-icon {
            transition: all 0.3s ease;
        }
        .category-icon:hover {
            transform: scale(1.1);
        }
        .progress-tube {
            position: relative;
            height: 200px;
            width: 60px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 30px;
            overflow: hidden;
            border: 3px solid #1976D2;
        }
        .progress-fill {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(to top, #1976D2, #64B5F6);
            border-radius: 0 0 30px 30px;
            transition: height 0.5s ease-in-out;
        }
        .tab-button {
            transition: all 0.2s ease;
        }
        .tab-button:hover {
            transform: translateY(-2px);
        }
        .tab-button.active {
            background-color: #1976D2;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .nav-button.active {
            background-color: #E3F2FD;
            color: #1976D2;
            font-weight: 600;
        }
        .category-card {
            transition: all 0.3s ease;
        }
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .modal {
            transition: opacity 0.3s ease;
        }
        .delete-btn {
            opacity: 0.7;
            transition: all 0.2s ease;
        }
        .delete-btn:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        .history-item {
            transition: all 0.3s ease;
        }
        .history-item:hover .delete-btn {
            opacity: 1;
        }
        /* Toggle switch styling */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #FF9999;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        .settings-btn {
            transition: all 0.3s ease;
        }
        .settings-btn:hover {
            transform: rotate(45deg);
        }
        .settings-btn.active {
            transform: rotate(90deg);
        }
        .gear-icon {
            animation: spin 20s linear infinite;
        }
        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }
        .app-disabled {
            opacity: 0.7;
            pointer-events: none;
        }
        .app-partially-disabled {
            opacity: 0.9;
        }
        .app-partially-disabled .disabled-feature {
            opacity: 0.5;
            pointer-events: none;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Daily Theme Banner -->
        <div id="daily-theme-banner" class="mothers-day-banner">
            <div class="flex items-center justify-center mb-2">
                <span id="theme-icon-left" class="jasmine-flower text-2xl">üå∏</span>
                <h2 id="theme-title" class="text-2xl font-bold text-white mx-3">‡∏ß‡∏±‡∏ô‡πÅ‡∏°‡πà‡πÅ‡∏´‡πà‡∏á‡∏ä‡∏≤‡∏ï‡∏¥ 12 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°</h2>
                <span id="theme-icon-right" class="jasmine-flower text-2xl">üå∏</span>
            </div>
            <p id="theme-message" class="text-white font-medium">üíù ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ï‡∏±‡∏ç‡∏ç‡∏π‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏™‡∏ï‡∏¥ üíù</p>
        </div>
        
        <!-- Header -->
        <header class="flex justify-between items-center mb-8">
            <!-- Hamburger Menu -->
            <div class="flex items-center">
                <button id="menu-toggle" class="mr-4 p-2 rounded-lg hover:bg-blue-100 transition duration-300">
                    <div class="flex flex-col space-y-1">
                        <div class="w-6 h-0.5 bg-blue-600 transition-all duration-300"></div>
                        <div class="w-6 h-0.5 bg-blue-600 transition-all duration-300"></div>
                        <div class="w-6 h-0.5 bg-blue-600 transition-all duration-300"></div>
                    </div>
                </button>
                <span class="text-blue-600 font-medium mr-4">Menu</span>
            </div>
            
            <!-- Logo and Title -->
            <div class="flex items-center flex-1 justify-center">
                <svg class="piggy-bank w-12 h-12 mr-3" viewBox="0 0 512 512" fill="#1976D2">
                    <path d="M422,108h-32c-4.4,0-8,3.6-8,8s3.6,8,8,8h32c4.4,0,8-3.6,8-8S426.4,108,422,108z"/>
                    <path d="M78,280c-4.4,0-8,3.6-8,8v32c0,4.4,3.6,8,8,8s8-3.6,8-8v-32C86,283.6,82.4,280,78,280z"/>
                    <path d="M430.4,280.5c-0.2-0.2-0.4-0.3-0.6-0.5H408c-4.4,0-8,3.6-8,8s3.6,8,8,8h8c0,13.2-2.1,25.9-6,37.8l-31.8-5.6
                        c-4.3-0.8-8.4,2.1-9.1,6.4c-0.8,4.3,2.1,8.4,6.4,9.1l24.2,4.3c-12.7,29.8-36.1,55.3-65.9,71.3c-9.8-14.7-26.6-24.4-45.7-24.4h-80
                        c-19.1,0-35.9,9.7-45.7,24.4c-29.8-16-53.2-41.5-65.9-71.3l24.2-4.3c4.3-0.8,7.1-4.8,6.4-9.1c-0.8-4.3-4.8-7.1-9.1-6.4l-31.8,5.6
                        c-3.9-11.9-6-24.6-6-37.8h168c4.4,0,8-3.6,8-8s-3.6-8-8-8H78c-0.2,0.2-0.4,0.3-0.6,0.5C77.3,280.3,77.1,280.2,77,280
                        c-0.3-0.3-0.5-0.5-0.8-0.7c-0.3-0.2-0.5-0.4-0.8-0.6c-0.3-0.2-0.6-0.3-0.9-0.4c-0.3-0.1-0.6-0.3-0.9-0.4c-0.3-0.1-0.6-0.2-0.9-0.2
                        c-0.3-0.1-0.6-0.1-0.9-0.1c-0.3,0-0.6-0.1-0.9-0.1c-0.3,0-0.6,0-0.9,0c-0.3,0-0.6,0.1-0.9,0.1c-0.3,0-0.6,0.1-0.9,0.1
                        c-0.3,0.1-0.6,0.2-0.9,0.2c-0.3,0.1-0.6,0.2-0.9,0.4c-0.3,0.1-0.6,0.3-0.9,0.4c-0.3,0.2-0.6,0.3-0.8,0.6c-0.3,0.2-0.5,0.4-0.8,0.7
                        c-0.1,0.1-0.3,0.2-0.4,0.3c-0.2,0.2-0.3,0.4-0.5,0.6V264c0-92.6,75.4-168,168-168c92.6,0,168,75.4,168,168v16.8
                        c-0.2-0.2-0.3-0.4-0.5-0.6C430.7,280.1,430.5,280.3,430.4,280.5z"/>
                    <path d="M286,368h-60c-4.4,0-8,3.6-8,8s3.6,8,8,8h60c4.4,0,8-3.6,8-8S290.4,368,286,368z"/>
                    <path d="M286,336h-60c-4.4,0-8,3.6-8,8s3.6,8,8,8h60c4.4,0,8-3.6,8-8S290.4,336,286,336z"/>
                    <path d="M286,304h-60c-4.4,0-8,3.6-8,8s3.6,8,8,8h60c4.4,0,8-3.6,8-8S290.4,304,286,304z"/>
                    <path d="M286,272h-60c-4.4,0-8,3.6-8,8s3.6,8,8,8h60c4.4,0,8-3.6,8-8S290.4,272,286,272z"/>
                    <path d="M286,240h-60c-4.4,0-8,3.6-8,8s3.6,8,8,8h60c4.4,0,8-3.6,8-8S290.4,240,286,240z"/>
                    <path d="M286,208h-60c-4.4,0-8,3.6-8,8s3.6,8,8,8h60c4.4,0,8-3.6,8-8S290.4,208,286,208z"/>
                    <path d="M286,176h-60c-4.4,0-8,3.6-8,8s3.6,8,8,8h60c4.4,0,8-3.6,8-8S290.4,176,286,176z"/>
                </svg>
                <div class="text-center">
                    <h1 class="text-2xl font-bold text-blue-600">Cold Pocket</h1>
                    <div class="flex items-center text-sm text-blue-500">
                        <span id="current-datetime" class="mr-2"></span>
                        <span>‚Ä¢</span>
                        <span class="ml-2">‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î</span>
                    </div>
                </div>
            </div>
            
            <!-- Total Savings -->
            <div class="text-right">
                <p class="text-sm font-medium text-blue-600">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                <p id="total-savings" class="text-xl font-bold text-blue-700">‡∏ø0</p>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Mobile Navigation Menu -->
            <div id="mobile-menu" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
                <div class="fixed left-0 top-0 h-full w-80 bg-white shadow-lg transform -translate-x-full transition-transform duration-300" id="menu-sidebar">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-xl font-bold text-blue-600">‡πÄ‡∏°‡∏ô‡∏π</h2>
                            <button id="menu-close" class="p-2 hover:bg-gray-100 rounded-lg">
                                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                        <nav class="space-y-2">
                            <button id="nav-home" class="nav-button active w-full flex items-center p-3 rounded-lg hover:bg-blue-50 transition duration-300">
                                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                </svg>
                                ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                            </button>
                            <button id="nav-history" class="nav-button w-full flex items-center p-3 rounded-lg hover:bg-blue-50 transition duration-300">
                                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                                ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°
                            </button>
                            <button id="nav-categories" class="nav-button w-full flex items-center p-3 rounded-lg hover:bg-blue-50 transition duration-300">
                                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14-7H5a2 2 0 00-2 2v14c0 1.1.9 2 2 2h14a2 2 0 002-2V6a2 2 0 00-2-2z"></path>
                                </svg>
                                ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                            </button>
                            <button id="nav-goals" class="nav-button w-full flex items-center p-3 rounded-lg hover:bg-blue-50 transition duration-300">
                                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                                </svg>
                                ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                            </button>
                            <hr class="my-4">
                            <button id="nav-settings" class="nav-button w-full flex items-center p-3 rounded-lg hover:bg-blue-50 transition duration-300">
                                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
                            </button>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- Desktop Tabs (hidden on mobile) -->
            <div id="desktop-tabs" class="hidden md:flex mb-6 bg-white rounded-full p-1 shadow-md">
                <button id="tab-home" class="tab-button active flex-1 py-2 px-4 rounded-full text-center font-medium flex items-center justify-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                </button>
                <button id="tab-history" class="tab-button flex-1 py-2 px-4 rounded-full text-center font-medium flex items-center justify-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°
                </button>
                <button id="tab-categories" class="tab-button flex-1 py-2 px-4 rounded-full text-center font-medium flex items-center justify-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14-7H5a2 2 0 00-2 2v14c0 1.1.9 2 2 2h14a2 2 0 002-2V6a2 2 0 00-2-2z"></path>
                    </svg>
                    ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                </button>
                <button id="tab-goals" class="tab-button flex-1 py-2 px-4 rounded-full text-center font-medium flex items-center justify-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                    </svg>
                    ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                </button>
                <button id="settings-button" class="settings-btn ml-1 bg-gray-200 hover:bg-gray-300 text-gray-700 p-2 rounded-full transition duration-300">
                    <svg class="gear-icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                </button>
            </div>

            <!-- Home Tab -->
            <div id="home-content" class="tab-content bg-white rounded-2xl p-6 shadow-lg">
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="flex-1">
                        <h2 class="text-xl font-bold text-blue-600 mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h2>
                        <div class="bg-blue-50 rounded-xl p-4 mb-4">
                            <div class="mb-4">
                                <label class="block text-blue-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
                                <input id="amount-input" type="number" class="w-full px-4 py-2 rounded-lg border border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="0.00">
                            </div>
                            <div class="mb-4">
                                <label class="block text-blue-700 mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                                <select id="category-select" class="w-full px-4 py-2 rounded-lg border border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label class="block text-blue-700 mb-2">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                                <input id="note-input" type="text" class="w-full px-4 py-2 rounded-lg border border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°...">
                            </div>
                            <button id="save-button" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center disabled-feature">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°
                            </button>
                        </div>
                        
                        <div class="bg-blue-50 rounded-xl p-4">
                            <h3 class="text-lg font-bold text-blue-600 mb-3">‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                            <div id="recent-savings" class="space-y-3">
                                <div class="text-center text-gray-500 py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex-1 flex flex-col items-center">
                        <div class="flex justify-between items-center w-full mb-4">
                            <h2 class="text-xl font-bold text-blue-600">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</h2>
                            <button id="goal-settings-button" class="settings-btn bg-gray-200 hover:bg-gray-300 text-gray-700 p-2 rounded-full transition duration-300">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </button>
                        </div>
                        <div id="goal-container" class="relative flex flex-col items-center">
                            <div id="no-goal" class="text-center mb-4">
                                <p class="text-gray-500 mb-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</p>
                                <button id="create-goal-button" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 disabled-feature">
                                    ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                                </button>
                            </div>
                            
                            <div id="active-goal" class="hidden flex flex-col items-center">
                                <h3 id="goal-name" class="text-lg font-bold text-pink-600 mb-2">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</h3>
                                <div class="flex items-end mb-4">
                                    <div class="progress-tube">
                                        <div id="progress-fill" class="progress-fill" style="height: 0%"></div>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-pink-600 font-bold">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</p>
                                        <p id="progress-percent" class="text-2xl font-bold text-pink-700">0%</p>
                                        <p id="progress-amount" class="text-lg text-pink-600">‡∏ø0 / ‡∏ø0</p>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button id="edit-goal-button" class="bg-pink-400 hover:bg-pink-500 text-white font-bold py-2 px-4 rounded-lg transition duration-300 disabled-feature">
                                        ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                                    </button>
                                    <button id="delete-active-goal-button" class="bg-red-400 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition duration-300 disabled-feature">
                                        ‡∏•‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div id="history-content" class="tab-content hidden bg-white rounded-2xl p-6 shadow-lg">
                <h2 class="text-xl font-bold text-pink-600 mb-4">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h2>
                
                <!-- Daily Savings Chart -->
                <div class="bg-pink-50 rounded-xl p-4 mb-6">
                    <h3 class="text-lg font-bold text-pink-600 mb-4">‡∏Å‡∏£‡∏≤‡∏ü‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)</h3>
                    <div class="flex items-end justify-between h-40 bg-white rounded-lg p-4">
                        <div id="daily-chart" class="flex items-end justify-between w-full h-full">
                            <!-- Chart bars will be generated here -->
                        </div>
                    </div>
                    <div class="flex justify-between mt-2 text-xs text-pink-600">
                        <span id="chart-day-0"></span>
                        <span id="chart-day-1"></span>
                        <span id="chart-day-2"></span>
                        <span id="chart-day-3"></span>
                        <span id="chart-day-4"></span>
                        <span id="chart-day-5"></span>
                        <span id="chart-day-6"></span>
                    </div>
                </div>
                
                <div class="mb-4 flex gap-2">
                    <select id="filter-category" class="px-4 py-2 rounded-lg border border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="all">‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                        <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                    </select>
                    <select id="filter-date" class="px-4 py-2 rounded-lg border border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="all">‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</option>
                        <option value="today">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</option>
                        <option value="week">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ</option>
                        <option value="month">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</option>
                        <option value="year">‡∏õ‡∏µ‡∏ô‡∏µ‡πâ</option>
                    </select>
                </div>
                <div class="bg-blue-50 rounded-xl p-4">
                    <div id="history-list" class="divide-y divide-blue-200">
                        <div class="text-center text-gray-500 py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</div>
                    </div>
                </div>
            </div>

            <!-- Categories Tab -->
            <div id="categories-content" class="tab-content hidden bg-white rounded-2xl p-6 shadow-lg">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-pink-600">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</h2>
                    <button id="add-category-button" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 disabled-feature">
                        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="category-card bg-pink-50 rounded-xl p-4 shadow-md">
                        <div class="flex items-center mb-3">
                            <div class="category-icon bg-pink-200 p-3 rounded-full mr-3">
                                <svg class="w-6 h-6 text-pink-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3 3a1 1 0 000 2h11a1 1 0 100-2H3zM3 7a1 1 0 000 2h5a1 1 0 000-2H3zM3 11a1 1 0 100 2h4a1 1 0 100-2H3zM13 16a1 1 0 102 0v-5.586l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 101.414 1.414L13 10.414V16z"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-bold text-pink-600">‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                        </div>
                        <p id="food-total" class="text-xl font-bold text-pink-700">‡∏ø0</p>
                        <div class="mt-2 bg-white rounded-lg h-2">
                            <div id="food-bar" class="bg-pink-500 h-2 rounded-lg" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="category-card bg-pink-50 rounded-xl p-4 shadow-md">
                        <div class="flex items-center mb-3">
                            <div class="category-icon bg-pink-200 p-3 rounded-full mr-3">
                                <svg class="w-6 h-6 text-pink-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-bold text-pink-600">‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á</h3>
                        </div>
                        <p id="shopping-total" class="text-xl font-bold text-pink-700">‡∏ø0</p>
                        <div class="mt-2 bg-white rounded-lg h-2">
                            <div id="shopping-bar" class="bg-pink-500 h-2 rounded-lg" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="category-card bg-pink-50 rounded-xl p-4 shadow-md">
                        <div class="flex items-center mb-3">
                            <div class="category-icon bg-pink-200 p-3 rounded-full mr-3">
                                <svg class="w-6 h-6 text-pink-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-bold text-pink-600">‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h3>
                        </div>
                        <p id="education-total" class="text-xl font-bold text-pink-700">‡∏ø0</p>
                        <div class="mt-2 bg-white rounded-lg h-2">
                            <div id="education-bar" class="bg-pink-500 h-2 rounded-lg" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="category-card bg-pink-50 rounded-xl p-4 shadow-md">
                        <div class="flex items-center mb-3">
                            <div class="category-icon bg-pink-200 p-3 rounded-full mr-3">
                                <svg class="w-6 h-6 text-pink-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-bold text-pink-600">‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</h3>
                        </div>
                        <p id="travel-total" class="text-xl font-bold text-pink-700">‡∏ø0</p>
                        <div class="mt-2 bg-white rounded-lg h-2">
                            <div id="travel-bar" class="bg-pink-500 h-2 rounded-lg" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="category-card bg-pink-50 rounded-xl p-4 shadow-md">
                        <div class="flex items-center mb-3">
                            <div class="category-icon bg-pink-200 p-3 rounded-full mr-3">
                                <svg class="w-6 h-6 text-pink-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-bold text-pink-600">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</h3>
                        </div>
                        <p id="emergency-total" class="text-xl font-bold text-pink-700">‡∏ø0</p>
                        <div class="mt-2 bg-white rounded-lg h-2">
                            <div id="emergency-bar" class="bg-pink-500 h-2 rounded-lg" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="category-card bg-pink-50 rounded-xl p-4 shadow-md">
                        <div class="flex items-center mb-3">
                            <div class="category-icon bg-pink-200 p-3 rounded-full mr-3">
                                <svg class="w-6 h-6 text-pink-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-bold text-pink-600">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</h3>
                        </div>
                        <p id="other-total" class="text-xl font-bold text-pink-700">‡∏ø0</p>
                        <div class="mt-2 bg-white rounded-lg h-2">
                            <div id="other-bar" class="bg-pink-500 h-2 rounded-lg" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Goals Tab -->
            <div id="goals-content" class="tab-content hidden bg-white rounded-2xl p-6 shadow-lg">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-pink-600">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</h2>
                    <div class="flex space-x-2">
                        <button id="add-goal-button" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 disabled-feature">
                            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                        </button>
                    </div>
                </div>
                <div id="goals-list" class="space-y-4">
                    <div class="text-center text-gray-500 py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</div>
                </div>
            </div>
        </main>
    </div>

    <!-- Goal Modal -->
    <div id="goal-modal" class="modal fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4">
            <h2 id="goal-modal-title" class="text-xl font-bold text-pink-600 mb-4">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</h2>
            <div class="mb-4">
                <label class="block text-pink-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</label>
                <input id="goal-name-input" type="text" class="w-full px-4 py-2 rounded-lg border border-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-500" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏∑‡πâ‡∏≠‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡∏°‡πà">
            </div>
            <div class="mb-4">
                <label class="block text-pink-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</label>
                <input id="goal-amount-input" type="number" class="w-full px-4 py-2 rounded-lg border border-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-500" placeholder="0.00">
            </div>
            <div class="mb-4">
                <label class="block text-pink-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏£‡∏•‡∏∏‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                <input id="goal-date-input" type="date" class="w-full px-4 py-2 rounded-lg border border-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-500">
            </div>
            <div class="flex justify-end space-x-2">
                <button id="goal-cancel-button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition duration-300">
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
                <button id="goal-save-button" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4">
            <h2 class="text-xl font-bold text-pink-600 mb-4">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h2>
            <p id="delete-confirmation-message" class="mb-6 text-gray-700">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ</p>
            <div class="flex justify-end space-x-2">
                <button id="delete-cancel-button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition duration-300">
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
                <button id="delete-confirm-button" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                    ‡∏•‡∏ö
                </button>
            </div>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="category-modal" class="modal fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4">
            <h2 id="category-modal-title" class="text-xl font-bold text-pink-600 mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà</h2>
            <div class="mb-4">
                <label class="block text-pink-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                <input id="category-name-input" type="text" class="w-full px-4 py-2 rounded-lg border border-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-500" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß">
            </div>
            <div class="mb-4">
                <label class="block text-pink-700 mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô</label>
                <div class="grid grid-cols-6 gap-2" id="icon-selector">
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üõçÔ∏è">üõçÔ∏è</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üè†">üè†</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üöó">üöó</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üíä">üíä</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üéÆ">üéÆ</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üëï">üëï</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üì±">üì±</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üíÑ">üíÑ</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üéµ">üéµ</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üå∏">üå∏</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="üíù">üíù</button>
                    <button class="icon-option p-2 border-2 border-gray-300 rounded-lg hover:border-pink-500 transition duration-300" data-icon="‚≠ê">‚≠ê</button>
                </div>
            </div>
            <div class="flex justify-end space-x-2">
                <button id="category-cancel-button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition duration-300">
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
                <button id="category-save-button" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-pink-600">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h2>
                <button id="settings-close-button" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <h3 class="font-bold text-pink-600">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h3>
                        <p class="text-sm text-gray-600">‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô</p>
                    </div>
                    <label class="toggle-switch">
                        <input id="app-status-toggle" type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="flex justify-between items-center">
                    <div>
                        <h3 class="font-bold text-pink-600">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</h3>
                        <p id="app-status-text" class="text-sm font-medium text-green-600">‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</p>
                    </div>
                    <div id="status-indicator" class="w-4 h-4 bg-green-500 rounded-full"></div>
                </div>
            </div>
            
            <div class="border-t border-gray-200 pt-4 mb-4">
                <h3 class="font-bold text-blue-600 mb-3">‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</h3>
                <div class="mb-4">
                    <label class="block text-blue-700 mb-2 text-sm">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label>
                    <select id="device-mode-selector" class="w-full px-3 py-2 rounded-lg border border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                        <option value="auto">‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏ï‡∏≤‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠)</option>
                        <option value="mobile">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</option>
                        <option value="desktop">‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå/‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏•‡πá‡∏ï</option>
                    </select>
                </div>
            </div>
            
            <div class="border-t border-gray-200 pt-4 mb-4">
                <h3 class="font-bold text-blue-600 mb-3">‡∏ò‡∏µ‡∏°‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h3>
                <div class="mb-4">
                    <label class="block text-blue-700 mb-2 text-sm">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
                    <div class="bg-blue-50 p-3 rounded-lg">
                        <div class="flex items-center text-sm text-blue-600">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>‡∏ò‡∏µ‡∏°‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ï‡πà‡∏≤‡∏á‡πÜ</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-200 pt-4 mb-4">
                <h3 class="font-bold text-pink-600 mb-2">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô</h3>
                <p class="text-sm text-gray-600 mb-1">Cold Pocket - ‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î</p>
                <p class="text-sm text-gray-600 mb-1">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô: <span class="font-medium">2.3.0</span></p>
                <p class="text-sm text-gray-600">‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢: Cold Pocket Team</p>
            </div>
            
            <div class="border-t border-gray-200 pt-4">
                <h3 class="font-bold text-pink-600 mb-2">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï</h3>
                <div class="max-h-40 overflow-y-auto">
                    <div class="text-sm text-gray-600 mb-2">
                        <div class="font-medium text-pink-600">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 2.3.0</div>
                        <div class="text-xs text-gray-500" id="current-update-time"></div>
                        <div class="ml-2">
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ò‡∏µ‡∏°‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤<br>
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô 7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î<br>
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÉ‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î<br>
                            ‚Ä¢ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                        </div>
                    </div>
                    <div class="text-sm text-gray-600 mb-2">
                        <div class="font-medium text-pink-600">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 2.2.0</div>
                        <div class="text-xs text-gray-500">12 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏° 2567, 16:45</div>
                        <div class="ml-2">
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ò‡∏µ‡∏°‡∏ß‡∏±‡∏ô‡πÅ‡∏°‡πà‡πÅ‡∏´‡πà‡∏á‡∏ä‡∏≤‡∏ï‡∏¥<br>
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÅ‡∏ö‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á<br>
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÉ‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
                        </div>
                    </div>
                    <div class="text-sm text-gray-600 mb-2">
                        <div class="font-medium text-pink-600">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 2.1.5</div>
                        <div class="text-xs text-gray-500">10 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏° 2567, 14:30</div>
                        <div class="ml-2">
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢<br>
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå/‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå<br>
                            ‚Ä¢ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
                        </div>
                    </div>
                    <div class="text-sm text-gray-600">
                        <div class="font-medium text-pink-600">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 2.1.0</div>
                        <div class="text-xs text-gray-500">8 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏° 2567, 10:15</div>
                        <div class="ml-2">
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°<br>
                            ‚Ä¢ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ<br>
                            ‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="success-toast" class="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <span id="toast-message">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>
    </div>

    <script>
        // Initialize data from localStorage or set defaults
        let savings = JSON.parse(localStorage.getItem('coldPocketSavings')) || [];
        let goals = JSON.parse(localStorage.getItem('coldPocketGoals')) || [];
        let activeGoalId = localStorage.getItem('coldPocketActiveGoal') || null;
        let appStatus = localStorage.getItem('coldPocketAppStatus') !== 'offline';
        let customCategories = JSON.parse(localStorage.getItem('coldPocketCustomCategories')) || [];
        let selectedTheme = localStorage.getItem('coldPocketSelectedTheme') || 'auto';
        let deviceMode = localStorage.getItem('coldPocketDeviceMode') || 'auto';
        
        // Daily themes data
        const dailyThemes = {
            0: { // Sunday - ‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå
                title: "‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå ‡πÅ‡∏™‡∏á‡πÅ‡∏£‡∏Å‡πÅ‡∏´‡πà‡∏á‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå",
                message: "‚òÄÔ∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏ó‡∏µ‡πà‡∏™‡∏î‡πÉ‡∏™ ‚òÄÔ∏è",
                icon: "‚òÄÔ∏è",
                gradient: "linear-gradient(45deg, #FFD700, #FFA500, #FF8C00)"
            },
            1: { // Monday - ‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå
                title: "‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà",
                message: "üí™ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏à ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡∏ô‡∏¥‡∏î ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á üí™",
                icon: "üí™",
                gradient: "linear-gradient(45deg, #4169E1, #6495ED, #87CEEB)"
            },
            2: { // Tuesday - ‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£
                title: "‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ ‡∏ß‡∏±‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∏‡πà‡∏á‡∏°‡∏±‡πà‡∏ô",
                message: "üî• ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∏‡πà‡∏á‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á üî•",
                icon: "üî•",
                gradient: "linear-gradient(45deg, #DC143C, #FF6347, #FF7F50)"
            },
            3: { // Wednesday - ‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò
                title: "‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò ‡∏ß‡∏±‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏•",
                message: "‚öñÔ∏è ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô ‚öñÔ∏è",
                icon: "‚öñÔ∏è",
                gradient: "linear-gradient(45deg, #32CD32, #98FB98, #90EE90)"
            },
            4: { // Thursday - ‡∏ß‡∏±‡∏ô‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ
                title: "‡∏ß‡∏±‡∏ô‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ ‡∏ß‡∏±‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏à‡∏£‡∏¥‡∏ç",
                message: "üåü ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á üåü",
                icon: "üåü",
                gradient: "linear-gradient(45deg, #9370DB, #BA55D3, #DDA0DD)"
            },
            5: { // Friday - ‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå
                title: "‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå ‡∏ß‡∏±‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç",
                message: "üéâ ‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏ô‡∏∏‡∏Å üéâ",
                icon: "üéâ",
                gradient: "linear-gradient(45deg, #FF1493, #FF69B4, #FFB6C1)"
            },
            6: { // Saturday - ‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå
                title: "‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå ‡∏ß‡∏±‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô",
                message: "üåà ‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏™‡∏ï‡∏¥ ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏ç‡πà üåà",
                icon: "üåà",
                gradient: "linear-gradient(45deg, #00CED1, #40E0D0, #AFEEEE)"
            }
        };
        
        // Special date themes
        const specialThemes = {
            "08-12": { // Mother's Day
                title: "‡∏ß‡∏±‡∏ô‡πÅ‡∏°‡πà‡πÅ‡∏´‡πà‡∏á‡∏ä‡∏≤‡∏ï‡∏¥ 12 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°",
                message: "üíù ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ï‡∏±‡∏ç‡∏ç‡∏π‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏™‡∏ï‡∏¥ üíù",
                icon: "üå∏",
                gradient: "linear-gradient(45deg, #FFB6C1, #98FB98, #87CEEB)"
            },
            "12-05": { // Father's Day
                title: "‡∏ß‡∏±‡∏ô‡∏û‡πà‡∏≠‡πÅ‡∏´‡πà‡∏á‡∏ä‡∏≤‡∏ï‡∏¥ 5 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°",
                message: "üëë ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏≤‡∏£‡∏û ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏†‡∏≤‡∏Ñ‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß üëë",
                icon: "üëë",
                gradient: "linear-gradient(45deg, #4169E1, #FFD700, #87CEEB)"
            },
            "01-01": { // New Year
                title: "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà 2568",
                message: "üéä ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏™‡∏π‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéä",
                icon: "üéä",
                gradient: "linear-gradient(45deg, #FFD700, #FF6347, #9370DB)"
            }
        };
        
        // Default categories
        const defaultCategories = [
            { name: '‡∏≠‡∏∑‡πà‡∏ô‡πÜ', icon: '‚öôÔ∏è', isDefault: true }
        ];
        
        // Combine default and custom categories
        let allCategories = [...defaultCategories, ...customCategories];
        
        // DOM Elements
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        const saveButton = document.getElementById('save-button');
        const amountInput = document.getElementById('amount-input');
        const categorySelect = document.getElementById('category-select');
        const noteInput = document.getElementById('note-input');
        const totalSavingsElement = document.getElementById('total-savings');
        const recentSavingsElement = document.getElementById('recent-savings');
        const historyListElement = document.getElementById('history-list');
        const filterCategoryElement = document.getElementById('filter-category');
        const filterDateElement = document.getElementById('filter-date');
        const createGoalButton = document.getElementById('create-goal-button');
        const editGoalButton = document.getElementById('edit-goal-button');
        const deleteActiveGoalButton = document.getElementById('delete-active-goal-button');
        const addGoalButton = document.getElementById('add-goal-button');
        const addCategoryButton = document.getElementById('add-category-button');
        const settingsButton = document.getElementById('settings-button');
        const goalSettingsButton = document.getElementById('goal-settings-button');
        const categoryModal = document.getElementById('category-modal');
        const categoryModalTitle = document.getElementById('category-modal-title');
        const categoryNameInput = document.getElementById('category-name-input');
        const categoryCancelButton = document.getElementById('category-cancel-button');
        const categorySaveButton = document.getElementById('category-save-button');
        const iconSelector = document.getElementById('icon-selector');
        const goalModal = document.getElementById('goal-modal');
        const goalModalTitle = document.getElementById('goal-modal-title');
        const goalNameInput = document.getElementById('goal-name-input');
        const goalAmountInput = document.getElementById('goal-amount-input');
        const goalDateInput = document.getElementById('goal-date-input');
        const goalCancelButton = document.getElementById('goal-cancel-button');
        const goalSaveButton = document.getElementById('goal-save-button');
        const deleteModal = document.getElementById('delete-modal');
        const deleteConfirmationMessage = document.getElementById('delete-confirmation-message');
        const deleteCancelButton = document.getElementById('delete-cancel-button');
        const deleteConfirmButton = document.getElementById('delete-confirm-button');
        const settingsModal = document.getElementById('settings-modal');
        const settingsCloseButton = document.getElementById('settings-close-button');
        const appStatusToggle = document.getElementById('app-status-toggle');
        const appStatusText = document.getElementById('app-status-text');
        const statusIndicator = document.getElementById('status-indicator');
        const themeSelector = document.getElementById('theme-selector');
        const deviceModeSelector = document.getElementById('device-mode-selector');
        const successToast = document.getElementById('success-toast');
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuSidebar = document.getElementById('menu-sidebar');
        const menuClose = document.getElementById('menu-close');
        const currentDatetime = document.getElementById('current-datetime');
        const navButtons = document.querySelectorAll('.nav-button');
        const toastMessage = document.getElementById('toast-message');
        const noGoalElement = document.getElementById('no-goal');
        const activeGoalElement = document.getElementById('active-goal');
        const goalNameElement = document.getElementById('goal-name');
        const progressFillElement = document.getElementById('progress-fill');
        const progressPercentElement = document.getElementById('progress-percent');
        const progressAmountElement = document.getElementById('progress-amount');
        const goalsListElement = document.getElementById('goals-list');
        const mainContent = document.querySelector('main');
        const disabledFeatures = document.querySelectorAll('.disabled-feature');
        
        // Category elements (removed - now dynamically generated)
        
        // Variables for delete functionality
        let deletingGoalId = null;
        let deletingSavingId = null;
        let deletingCategoryName = null;
        let deleteType = null; // 'goal', 'saving', or 'category-savings'
        
        // Variables for category management
        let selectedIcon = 'üõçÔ∏è';
        let editingCategoryIndex = null;
        
        // Set initial app status
        appStatusToggle.checked = appStatus;
        updateAppStatus();
        
        // Tab switching
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                const tabId = button.id.replace('tab-', '');
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });
                document.getElementById(`${tabId}-content`).classList.remove('hidden');
                
                // Update content when switching tabs
                if (tabId === 'history') {
                    updateHistoryList();
                    updateDailyChart();
                } else if (tabId === 'categories') {
                    updateCategoryStats();
                } else if (tabId === 'goals') {
                    updateGoalsList();
                }
            });
        });
        
        // Save new saving
        saveButton.addEventListener('click', () => {
            if (!appStatus) {
                showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                return;
            }
            
            const amount = parseFloat(amountInput.value);
            if (isNaN(amount) || amount <= 0) {
                showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
                return;
            }
            
            const category = categorySelect.value;
            const note = noteInput.value;
            const date = new Date();
            
            const newSaving = {
                id: Date.now(),
                amount,
                category,
                note,
                date: date.toISOString()
            };
            
            savings.unshift(newSaving);
            localStorage.setItem('coldPocketSavings', JSON.stringify(savings));
            
            // Update UI
            updateTotalSavings();
            updateRecentSavings();
            updateCategoryStats();
            updateGoalProgress();
            
            // Clear inputs
            amountInput.value = '';
            noteInput.value = '';
            
            // Show success message
            showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
            
            // Add coin animation
            createCoinAnimation();
        });
        
        // Filter history
        filterCategoryElement.addEventListener('change', updateHistoryList);
        filterDateElement.addEventListener('change', updateHistoryList);
        
        // Goal modal events
        let editingGoalId = null;
        
        createGoalButton.addEventListener('click', () => {
            if (!appStatus) {
                showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                return;
            }
            openGoalModal();
        });
        
        editGoalButton.addEventListener('click', () => {
            if (!appStatus) {
                showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                return;
            }
            
            const goal = goals.find(g => g.id === activeGoalId);
            if (goal) {
                openGoalModal(goal);
            }
        });
        
        deleteActiveGoalButton.addEventListener('click', () => {
            if (!appStatus) {
                showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                return;
            }
            
            if (activeGoalId) {
                deletingGoalId = activeGoalId;
                deleteType = 'goal';
                deleteConfirmationMessage.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ';
                openDeleteModal();
            }
        });
        
        addGoalButton.addEventListener('click', () => {
            if (!appStatus) {
                showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                return;
            }
            openGoalModal();
        });
        
        addCategoryButton.addEventListener('click', () => {
            if (!appStatus) {
                showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                return;
            }
            openCategoryModal();
        });
        
        // Settings buttons
        settingsButton.addEventListener('click', () => {
            settingsButton.classList.toggle('active');
            settingsModal.classList.remove('hidden');
        });
        
        goalSettingsButton.addEventListener('click', () => {
            goalSettingsButton.classList.toggle('active');
            settingsModal.classList.remove('hidden');
        });
        
        settingsCloseButton.addEventListener('click', () => {
            settingsModal.classList.add('hidden');
            settingsButton.classList.remove('active');
            goalSettingsButton.classList.remove('active');
        });
        
        // App status toggle
        appStatusToggle.addEventListener('change', () => {
            appStatus = appStatusToggle.checked;
            localStorage.setItem('coldPocketAppStatus', appStatus ? 'online' : 'offline');
            updateAppStatus();
            showToast(appStatus ? '‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå' : '‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå');
        });
        
        // Theme selector (removed - now automatic)
        
        // Device mode selector
        deviceModeSelector.addEventListener('change', () => {
            deviceMode = deviceModeSelector.value;
            localStorage.setItem('coldPocketDeviceMode', deviceMode);
            updateDeviceMode();
            showToast('‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        });
        
        // Menu functionality
        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.remove('hidden');
            setTimeout(() => {
                menuSidebar.classList.remove('-translate-x-full');
            }, 10);
        });
        
        menuClose.addEventListener('click', closeMenu);
        
        mobileMenu.addEventListener('click', (e) => {
            if (e.target === mobileMenu) {
                closeMenu();
            }
        });
        
        // Navigation buttons
        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.id.replace('nav-', '');
                
                if (tabId === 'settings') {
                    settingsModal.classList.remove('hidden');
                    closeMenu();
                    return;
                }
                
                // Update nav button states
                navButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Update tab button states
                tabButtons.forEach(btn => btn.classList.remove('active'));
                const correspondingTab = document.getElementById(`tab-${tabId}`);
                if (correspondingTab) {
                    correspondingTab.classList.add('active');
                }
                
                // Show corresponding content
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });
                document.getElementById(`${tabId}-content`).classList.remove('hidden');
                
                // Update content when switching tabs
                if (tabId === 'history') {
                    updateHistoryList();
                    updateDailyChart();
                } else if (tabId === 'categories') {
                    updateCategoryStats();
                } else if (tabId === 'goals') {
                    updateGoalsList();
                }
                
                closeMenu();
            });
        });
        
        // Category modal events
        categoryCancelButton.addEventListener('click', closeCategoryModal);
        
        categorySaveButton.addEventListener('click', () => {
            const name = categoryNameInput.value.trim();
            
            if (!name) {
                showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà', 'error');
                return;
            }
            
            // Check if category name already exists
            if (allCategories.some(cat => cat.name === name)) {
                showToast('‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß', 'error');
                return;
            }
            
            const newCategory = {
                name: name,
                icon: selectedIcon,
                isDefault: false
            };
            
            customCategories.push(newCategory);
            allCategories.push(newCategory);
            localStorage.setItem('coldPocketCustomCategories', JSON.stringify(customCategories));
            
            // Update category select options
            updateCategorySelects();
            updateCategoryStats();
            
            closeCategoryModal();
            showToast('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        });
        
        // Icon selector events
        iconSelector.addEventListener('click', (e) => {
            if (e.target.classList.contains('icon-option')) {
                // Remove previous selection
                document.querySelectorAll('.icon-option').forEach(btn => {
                    btn.classList.remove('border-pink-500', 'bg-pink-100');
                    btn.classList.add('border-gray-300');
                });
                
                // Add selection to clicked icon
                e.target.classList.remove('border-gray-300');
                e.target.classList.add('border-pink-500', 'bg-pink-100');
                selectedIcon = e.target.getAttribute('data-icon');
            }
        });
        
        goalCancelButton.addEventListener('click', closeGoalModal);
        
        goalSaveButton.addEventListener('click', () => {
            const name = goalNameInput.value.trim();
            const amount = parseFloat(goalAmountInput.value);
            const date = goalDateInput.value;
            
            if (!name) {
                showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢', 'error');
                return;
            }
            
            if (isNaN(amount) || amount <= 0) {
                showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
                return;
            }
            
            if (editingGoalId) {
                // Update existing goal
                const index = goals.findIndex(g => g.id === editingGoalId);
                if (index !== -1) {
                    goals[index] = {
                        ...goals[index],
                        name,
                        amount,
                        targetDate: date || null
                    };
                }
            } else {
                // Create new goal
                const newGoal = {
                    id: Date.now().toString(),
                    name,
                    amount,
                    targetDate: date || null,
                    createdAt: new Date().toISOString()
                };
                goals.push(newGoal);
                
                // Set as active if it's the first goal
                if (!activeGoalId) {
                    activeGoalId = newGoal.id;
                    localStorage.setItem('coldPocketActiveGoal', activeGoalId);
                }
            }
            
            localStorage.setItem('coldPocketGoals', JSON.stringify(goals));
            
            closeGoalModal();
            updateGoalProgress();
            updateGoalsList();
            showToast(editingGoalId ? '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : '‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        });
        
        // Delete confirmation modal events
        deleteCancelButton.addEventListener('click', closeDeleteModal);
        
        deleteConfirmButton.addEventListener('click', () => {
            if (deleteType === 'goal' && deletingGoalId) {
                const index = goals.findIndex(g => g.id === deletingGoalId);
                if (index !== -1) {
                    goals.splice(index, 1);
                    localStorage.setItem('coldPocketGoals', JSON.stringify(goals));
                    
                    // If active goal was deleted, set a new active goal or null
                    if (deletingGoalId === activeGoalId) {
                        activeGoalId = goals.length > 0 ? goals[0].id : null;
                        localStorage.setItem('coldPocketActiveGoal', activeGoalId);
                    }
                    
                    updateGoalProgress();
                    updateGoalsList();
                    showToast('‡∏•‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                }
            } else if (deleteType === 'saving' && deletingSavingId) {
                const index = savings.findIndex(s => s.id === deletingSavingId);
                if (index !== -1) {
                    savings.splice(index, 1);
                    localStorage.setItem('coldPocketSavings', JSON.stringify(savings));
                    
                    // Update all related UI
                    updateTotalSavings();
                    updateRecentSavings();
                    updateHistoryList();
                    updateCategoryStats();
                    updateGoalProgress();
                    
                    showToast('‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                }
            } else if (deleteType === 'category-savings' && deletingCategoryName) {
                // Delete all savings in the category
                const deletedCount = savings.filter(s => s.category === deletingCategoryName).length;
                savings = savings.filter(s => s.category !== deletingCategoryName);
                localStorage.setItem('coldPocketSavings', JSON.stringify(savings));
                
                // Update all related UI
                updateTotalSavings();
                updateRecentSavings();
                updateHistoryList();
                updateCategoryStats();
                updateGoalProgress();
                
                showToast(`‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô ${deletedCount} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`);
            }
            closeDeleteModal();
        });
        
        // Helper functions
        function updateCurrentDateTime() {
            const now = new Date();
            const options = {
                weekday: 'short',
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            const thaiDateTime = now.toLocaleDateString('th-TH', options);
            currentDatetime.textContent = thaiDateTime;
        }
        
        function closeMenu() {
            menuSidebar.classList.add('-translate-x-full');
            setTimeout(() => {
                mobileMenu.classList.add('hidden');
            }, 300);
        }
        
        function updateDeviceMode() {
            const desktopTabs = document.getElementById('desktop-tabs');
            
            if (deviceMode === 'mobile') {
                desktopTabs.classList.add('hidden');
                desktopTabs.classList.remove('md:flex');
            } else if (deviceMode === 'desktop') {
                desktopTabs.classList.remove('hidden');
                desktopTabs.classList.add('flex');
                desktopTabs.classList.remove('md:flex');
            } else { // auto
                desktopTabs.classList.remove('hidden', 'flex');
                desktopTabs.classList.add('md:flex');
            }
        }
        
        function updateDailyTheme() {
            const now = new Date();
            const dayOfWeek = now.getDay();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const day = now.getDate().toString().padStart(2, '0');
            const dateKey = `${month}-${day}`;
            
            // Always use automatic theme selection
            let currentTheme;
            // Check for special themes first
            if (specialThemes[dateKey]) {
                currentTheme = specialThemes[dateKey];
            } else {
                currentTheme = dailyThemes[dayOfWeek];
            }
            
            // Update theme elements
            const banner = document.getElementById('daily-theme-banner');
            const themeTitle = document.getElementById('theme-title');
            const themeMessage = document.getElementById('theme-message');
            const themeIconLeft = document.getElementById('theme-icon-left');
            const themeIconRight = document.getElementById('theme-icon-right');
            
            if (banner && currentTheme) {
                banner.style.background = currentTheme.gradient;
                themeTitle.textContent = currentTheme.title;
                themeMessage.textContent = currentTheme.message;
                themeIconLeft.textContent = currentTheme.icon;
                themeIconRight.textContent = currentTheme.icon;
            }
        }
        
        function updateAppStatus() {
            if (appStatus) {
                appStatusText.textContent = '‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå';
                appStatusText.classList.remove('text-red-600');
                appStatusText.classList.add('text-green-600');
                statusIndicator.classList.remove('bg-red-500');
                statusIndicator.classList.add('bg-green-500');
                mainContent.classList.remove('app-partially-disabled');
                
                // Enable all features
                disabledFeatures.forEach(element => {
                    element.classList.remove('disabled-feature');
                });
            } else {
                appStatusText.textContent = '‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå';
                appStatusText.classList.remove('text-green-600');
                appStatusText.classList.add('text-red-600');
                statusIndicator.classList.remove('bg-green-500');
                statusIndicator.classList.add('bg-red-500');
                mainContent.classList.add('app-partially-disabled');
                
                // Disable specific features
                disabledFeatures.forEach(element => {
                    element.classList.add('disabled-feature');
                });
            }
        }
        
        function updateTotalSavings() {
            const total = savings.reduce((sum, item) => sum + item.amount, 0);
            totalSavingsElement.textContent = `‡∏ø${formatNumber(total)}`;
        }
        
        function updateRecentSavings() {
            if (savings.length === 0) {
                recentSavingsElement.innerHTML = '<div class="text-center text-gray-500 py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</div>';
                return;
            }
            
            recentSavingsElement.innerHTML = '';
            const recentItems = savings.slice(0, 5);
            
            recentItems.forEach(item => {
                const date = new Date(item.date);
                const formattedDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;
                
                const itemElement = document.createElement('div');
                itemElement.className = 'flex justify-between items-center p-3 bg-white rounded-lg shadow-sm';
                itemElement.innerHTML = `
                    <div>
                        <div class="font-medium text-pink-600">${item.category}</div>
                        <div class="text-sm text-gray-500">${formattedDate} ${item.note ? '- ' + item.note : ''}</div>
                    </div>
                    <div class="font-bold text-pink-700">‡∏ø${formatNumber(item.amount)}</div>
                `;
                recentSavingsElement.appendChild(itemElement);
            });
        }
        
        function updateHistoryList() {
            const categoryFilter = filterCategoryElement.value;
            const dateFilter = filterDateElement.value;
            
            let filteredSavings = [...savings];
            
            // Apply category filter
            if (categoryFilter !== 'all') {
                filteredSavings = filteredSavings.filter(item => item.category === categoryFilter);
            }
            
            // Apply date filter
            if (dateFilter !== 'all') {
                const now = new Date();
                const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                
                if (dateFilter === 'today') {
                    filteredSavings = filteredSavings.filter(item => {
                        const itemDate = new Date(item.date);
                        return itemDate >= today;
                    });
                } else if (dateFilter === 'week') {
                    const weekStart = new Date(now);
                    weekStart.setDate(now.getDate() - now.getDay());
                    weekStart.setHours(0, 0, 0, 0);
                    
                    filteredSavings = filteredSavings.filter(item => {
                        const itemDate = new Date(item.date);
                        return itemDate >= weekStart;
                    });
                } else if (dateFilter === 'month') {
                    const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
                    
                    filteredSavings = filteredSavings.filter(item => {
                        const itemDate = new Date(item.date);
                        return itemDate >= monthStart;
                    });
                } else if (dateFilter === 'year') {
                    const yearStart = new Date(now.getFullYear(), 0, 1);
                    
                    filteredSavings = filteredSavings.filter(item => {
                        const itemDate = new Date(item.date);
                        return itemDate >= yearStart;
                    });
                }
            }
            
            if (filteredSavings.length === 0) {
                historyListElement.innerHTML = '<div class="text-center text-gray-500 py-4">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</div>';
                return;
            }
            
            historyListElement.innerHTML = '';
            
            filteredSavings.forEach(item => {
                const date = new Date(item.date);
                const formattedDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;
                const formattedTime = `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
                
                const itemElement = document.createElement('div');
                itemElement.className = 'history-item flex justify-between items-center p-3 border-b border-pink-100 last:border-0';
                itemElement.innerHTML = `
                    <div>
                        <div class="font-medium text-pink-600">${item.category}</div>
                        <div class="text-sm text-gray-500">${formattedDate} ${formattedTime}</div>
                        ${item.note ? `<div class="text-sm text-gray-600">${item.note}</div>` : ''}
                    </div>
                    <div class="flex items-center">
                        <div class="font-bold text-pink-700 mr-3">‡∏ø${formatNumber(item.amount)}</div>
                        <button class="delete-btn bg-red-400 hover:bg-red-500 text-white p-1 rounded-full transition duration-300 ${!appStatus ? 'disabled-feature' : ''}" data-id="${item.id}">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                            </svg>
                        </button>
                    </div>
                `;
                historyListElement.appendChild(itemElement);
            });
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-btn').forEach(button => {
                if (!button.classList.contains('disabled-feature')) {
                    button.addEventListener('click', (e) => {
                        if (!appStatus) {
                            showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                            return;
                        }
                        
                        e.stopPropagation();
                        const savingId = parseInt(button.getAttribute('data-id'));
                        deletingSavingId = savingId;
                        deleteType = 'saving';
                        deleteConfirmationMessage.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ';
                        openDeleteModal();
                    });
                }
            });
        }
        
        function updateCategoryStats() {
            // Clear existing category display
            const categoriesGrid = document.querySelector('#categories-content .grid');
            categoriesGrid.innerHTML = '';
            
            const categorySums = {};
            
            // Initialize all categories to 0
            allCategories.forEach(category => {
                categorySums[category.name] = 0;
            });
            
            // Calculate sums for each category
            savings.forEach(item => {
                if (categorySums.hasOwnProperty(item.category)) {
                    categorySums[item.category] += item.amount;
                }
            });
            
            // Calculate total
            const total = Object.values(categorySums).reduce((sum, amount) => sum + amount, 0);
            
            // Create category cards
            allCategories.forEach(category => {
                const amount = categorySums[category.name];
                const percentage = total > 0 ? (amount / total) * 100 : 0;
                
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card bg-pink-50 rounded-xl p-4 shadow-md relative';
                
                categoryCard.innerHTML = `
                    <div class="flex items-center mb-3">
                        <div class="category-icon bg-pink-200 p-3 rounded-full mr-3">
                            <span class="text-2xl">${category.icon}</span>
                        </div>
                        <h3 class="text-lg font-bold text-pink-600">${category.name}</h3>
                        ${!category.isDefault ? `
                            <button class="delete-category-btn absolute top-2 right-2 bg-red-400 hover:bg-red-500 text-white p-1 rounded-full transition duration-300 ${!appStatus ? 'disabled-feature' : ''}" data-category="${category.name}">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        ` : ''}
                    </div>
                    <p class="text-xl font-bold text-pink-700">‡∏ø${formatNumber(amount)}</p>
                    <div class="mt-2 bg-white rounded-lg h-2">
                        <div class="bg-pink-500 h-2 rounded-lg" style="width: ${percentage}%"></div>
                    </div>
                    <div class="mt-3 flex justify-between items-center">
                        <span class="text-sm text-pink-600">${savings.filter(s => s.category === category.name).length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                        <button class="delete-category-savings-btn bg-red-400 hover:bg-red-500 text-white text-xs py-1 px-2 rounded-lg transition duration-300 ${!appStatus || amount === 0 ? 'disabled-feature opacity-50' : ''}" data-category="${category.name}">
                            ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </button>
                    </div>
                `;
                
                categoriesGrid.appendChild(categoryCard);
            });
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-category-btn').forEach(button => {
                if (!button.classList.contains('disabled-feature')) {
                    button.addEventListener('click', (e) => {
                        if (!appStatus) {
                            showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                            return;
                        }
                        
                        e.stopPropagation();
                        const categoryName = button.getAttribute('data-category');
                        deleteCustomCategory(categoryName);
                    });
                }
            });
            
            // Add event listeners to delete category savings buttons
            document.querySelectorAll('.delete-category-savings-btn').forEach(button => {
                if (!button.classList.contains('disabled-feature')) {
                    button.addEventListener('click', (e) => {
                        if (!appStatus) {
                            showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                            return;
                        }
                        
                        e.stopPropagation();
                        const categoryName = button.getAttribute('data-category');
                        const categoryAmount = savings.filter(s => s.category === categoryName).reduce((sum, s) => sum + s.amount, 0);
                        
                        if (categoryAmount === 0) {
                            showToast('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ', 'error');
                            return;
                        }
                        
                        deletingCategoryName = categoryName;
                        deleteType = 'category-savings';
                        deleteConfirmationMessage.textContent = `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà "${categoryName}" ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ`;
                        openDeleteModal();
                    });
                }
            });
        }
        
        function updateCategorySelects() {
            // Update main category select
            categorySelect.innerHTML = '';
            allCategories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.name;
                option.textContent = category.name;
                categorySelect.appendChild(option);
            });
            
            // Update filter category select
            filterCategoryElement.innerHTML = '<option value="all">‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>';
            allCategories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.name;
                option.textContent = category.name;
                filterCategoryElement.appendChild(option);
            });
        }
        
        function openCategoryModal() {
            categoryNameInput.value = '';
            selectedIcon = 'üõçÔ∏è';
            
            // Reset icon selection
            document.querySelectorAll('.icon-option').forEach(btn => {
                btn.classList.remove('border-pink-500', 'bg-pink-100');
                btn.classList.add('border-gray-300');
            });
            
            // Select first icon by default
            const firstIcon = document.querySelector('.icon-option');
            if (firstIcon) {
                firstIcon.classList.remove('border-gray-300');
                firstIcon.classList.add('border-pink-500', 'bg-pink-100');
            }
            
            categoryModal.classList.remove('hidden');
        }
        
        function closeCategoryModal() {
            categoryModal.classList.add('hidden');
        }
        
        function deleteCustomCategory(categoryName) {
            // Check if category is being used in savings
            const isUsed = savings.some(saving => saving.category === categoryName);
            
            if (isUsed) {
                showToast('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà', 'error');
                return;
            }
            
            // Remove from custom categories
            customCategories = customCategories.filter(cat => cat.name !== categoryName);
            allCategories = allCategories.filter(cat => cat.name !== categoryName);
            
            localStorage.setItem('coldPocketCustomCategories', JSON.stringify(customCategories));
            
            updateCategorySelects();
            updateCategoryStats();
            showToast('‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        }
        
        function updateGoalProgress() {
            if (!activeGoalId || goals.length === 0) {
                noGoalElement.classList.remove('hidden');
                activeGoalElement.classList.add('hidden');
                return;
            }
            
            const goal = goals.find(g => g.id === activeGoalId);
            if (!goal) {
                noGoalElement.classList.remove('hidden');
                activeGoalElement.classList.add('hidden');
                return;
            }
            
            noGoalElement.classList.add('hidden');
            activeGoalElement.classList.remove('hidden');
            
            // Calculate progress
            const totalSaved = savings.reduce((sum, item) => sum + item.amount, 0);
            const percentage = Math.min(Math.round((totalSaved / goal.amount) * 100), 100);
            
            // Update UI
            goalNameElement.textContent = goal.name;
            progressFillElement.style.height = `${percentage}%`;
            progressPercentElement.textContent = `${percentage}%`;
            progressAmountElement.textContent = `‡∏ø${formatNumber(totalSaved)} / ‡∏ø${formatNumber(goal.amount)}`;
            
            // Show celebration if goal is reached
            if (percentage >= 100 && !goal.celebrated) {
                showToast('üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ö‡∏£‡∏£‡∏•‡∏∏‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                goal.celebrated = true;
                localStorage.setItem('coldPocketGoals', JSON.stringify(goals));
            }
        }
        
        function updateGoalsList() {
            if (goals.length === 0) {
                goalsListElement.innerHTML = '<div class="text-center text-gray-500 py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</div>';
                return;
            }
            
            goalsListElement.innerHTML = '';
            const totalSaved = savings.reduce((sum, item) => sum + item.amount, 0);
            
            goals.forEach(goal => {
                const percentage = Math.min(Math.round((totalSaved / goal.amount) * 100), 100);
                const isActive = goal.id === activeGoalId;
                
                const goalElement = document.createElement('div');
                goalElement.className = `bg-pink-50 rounded-xl p-4 shadow-md ${isActive ? 'border-2 border-pink-500' : ''}`;
                
                let targetDateText = '';
                if (goal.targetDate) {
                    const targetDate = new Date(goal.targetDate);
                    targetDateText = `<div class="text-sm text-pink-600">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ${targetDate.getDate()}/${targetDate.getMonth() + 1}/${targetDate.getFullYear()}</div>`;
                }
                
                goalElement.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <div>
                            <h3 class="text-lg font-bold text-pink-600">${goal.name}</h3>
                            ${targetDateText}
                        </div>
                        <div class="text-right">
                            <div class="text-xl font-bold text-pink-700">‡∏ø${formatNumber(goal.amount)}</div>
                            <div class="text-sm text-pink-600">${percentage}% ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg h-4 mb-3">
                        <div class="bg-pink-500 h-4 rounded-lg" style="width: ${percentage}%"></div>
                    </div>
                    <div class="flex justify-end space-x-2">
                        <button class="bg-pink-400 hover:bg-pink-500 text-white text-sm py-1 px-3 rounded-lg transition duration-300 goal-edit ${!appStatus ? 'disabled-feature' : ''}" data-id="${goal.id}">
                            ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </button>
                        ${isActive ? 
                            '' : 
                            `<button class="bg-blue-400 hover:bg-blue-500 text-white text-sm py-1 px-3 rounded-lg transition duration-300 goal-activate ${!appStatus ? 'disabled-feature' : ''}" data-id="${goal.id}">
                                ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å
                            </button>`
                        }
                        <button class="bg-red-400 hover:bg-red-500 text-white text-sm py-1 px-3 rounded-lg transition duration-300 goal-delete ${!appStatus ? 'disabled-feature' : ''}" data-id="${goal.id}">
                            ‡∏•‡∏ö
                        </button>
                    </div>
                `;
                
                goalsListElement.appendChild(goalElement);
            });
            
            // Add event listeners to buttons
            document.querySelectorAll('.goal-edit').forEach(button => {
                if (!button.classList.contains('disabled-feature')) {
                    button.addEventListener('click', () => {
                        if (!appStatus) {
                            showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                            return;
                        }
                        
                        const goalId = button.getAttribute('data-id');
                        const goal = goals.find(g => g.id === goalId);
                        if (goal) {
                            openGoalModal(goal);
                        }
                    });
                }
            });
            
            document.querySelectorAll('.goal-activate').forEach(button => {
                if (!button.classList.contains('disabled-feature')) {
                    button.addEventListener('click', () => {
                        if (!appStatus) {
                            showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                            return;
                        }
                        
                        const goalId = button.getAttribute('data-id');
                        activeGoalId = goalId;
                        localStorage.setItem('coldPocketActiveGoal', activeGoalId);
                        updateGoalProgress();
                        updateGoalsList();
                        showToast('‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                    });
                }
            });
            
            document.querySelectorAll('.goal-delete').forEach(button => {
                if (!button.classList.contains('disabled-feature')) {
                    button.addEventListener('click', () => {
                        if (!appStatus) {
                            showToast('‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'error');
                            return;
                        }
                        
                        const goalId = button.getAttribute('data-id');
                        deletingGoalId = goalId;
                        deleteType = 'goal';
                        deleteConfirmationMessage.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ';
                        openDeleteModal();
                    });
                }
            });
        }
        
        function openGoalModal(goal = null) {
            if (goal) {
                goalModalTitle.textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°';
                goalNameInput.value = goal.name;
                goalAmountInput.value = goal.amount;
                goalDateInput.value = goal.targetDate || '';
                editingGoalId = goal.id;
            } else {
                goalModalTitle.textContent = '‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°';
                goalNameInput.value = '';
                goalAmountInput.value = '';
                goalDateInput.value = '';
                editingGoalId = null;
            }
            
            goalModal.classList.remove('hidden');
        }
        
        function closeGoalModal() {
            goalModal.classList.add('hidden');
        }
        
        function openDeleteModal() {
            deleteModal.classList.remove('hidden');
        }
        
        function closeDeleteModal() {
            deleteModal.classList.add('hidden');
            deletingGoalId = null;
            deletingSavingId = null;
            deletingCategoryName = null;
            deleteType = null;
        }
        
        function showToast(message, type = 'success') {
            toastMessage.textContent = message;
            
            if (type === 'error') {
                successToast.classList.remove('bg-green-500');
                successToast.classList.add('bg-red-500');
            } else {
                successToast.classList.remove('bg-red-500');
                successToast.classList.add('bg-green-500');
            }
            
            successToast.classList.remove('translate-y-20', 'opacity-0');
            
            setTimeout(() => {
                successToast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }
        
        function createCoinAnimation() {
            const coin = document.createElement('div');
            coin.className = 'coin-animation';
            coin.innerHTML = `
                <svg width="40" height="40" viewBox="0 0 24 24" fill="#FFD700" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="#FFA500" stroke-width="2"/>
                    <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="#FFA500">‡∏ø</text>
                </svg>
            `;
            
            // Position the coin near the input
            const rect = amountInput.getBoundingClientRect();
            coin.style.left = `${rect.left + rect.width / 2}px`;
            coin.style.top = `${rect.top}px`;
            
            document.body.appendChild(coin);
            
            // Remove the coin after animation completes
            setTimeout(() => {
                document.body.removeChild(coin);
            }, 1000);
        }
        
        function updateDailyChart() {
            const chartContainer = document.getElementById('daily-chart');
            const now = new Date();
            const dailyData = [];
            
            // Calculate savings for the last 7 days
            for (let i = 6; i >= 0; i--) {
                const date = new Date(now);
                date.setDate(now.getDate() - i);
                date.setHours(0, 0, 0, 0);
                
                const nextDate = new Date(date);
                nextDate.setDate(date.getDate() + 1);
                
                const dayTotal = savings
                    .filter(saving => {
                        const savingDate = new Date(saving.date);
                        return savingDate >= date && savingDate < nextDate;
                    })
                    .reduce((sum, saving) => sum + saving.amount, 0);
                
                dailyData.push({
                    date: date,
                    amount: dayTotal,
                    dayName: ['‡∏≠‡∏≤', '‡∏à', '‡∏≠', '‡∏û', '‡∏û‡∏§', '‡∏®', '‡∏™'][date.getDay()]
                });
            }
            
            // Find max amount for scaling
            const maxAmount = Math.max(...dailyData.map(d => d.amount), 1);
            
            // Clear existing chart
            chartContainer.innerHTML = '';
            
            // Create bars
            dailyData.forEach((data, index) => {
                const barHeight = maxAmount > 0 ? (data.amount / maxAmount) * 100 : 0;
                
                const barContainer = document.createElement('div');
                barContainer.className = 'flex flex-col items-center flex-1 mx-1';
                
                const bar = document.createElement('div');
                bar.className = 'bg-pink-500 rounded-t-lg w-full transition-all duration-500 hover:bg-pink-600 cursor-pointer';
                bar.style.height = `${barHeight}%`;
                bar.style.minHeight = data.amount > 0 ? '4px' : '0px';
                bar.title = `${data.dayName}: ‡∏ø${formatNumber(data.amount)}`;
                
                barContainer.appendChild(bar);
                chartContainer.appendChild(barContainer);
                
                // Update day labels
                const dayLabel = document.getElementById(`chart-day-${index}`);
                if (dayLabel) {
                    dayLabel.textContent = data.dayName;
                }
            });
        }
        
        function formatNumber(num) {
            return num.toLocaleString('th-TH', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }
        
        // Initialize the app
        deviceModeSelector.value = deviceMode;
        updateDeviceMode();
        updateCurrentDateTime();
        updateDailyTheme();
        updateTotalSavings();
        updateRecentSavings();
        updateGoalProgress();
        updateCategorySelects();
        updateDailyChart();
        
        // Update datetime every minute
        setInterval(updateCurrentDateTime, 60000);
        
        // Set current update time
        const now = new Date();
        const currentTime = `${now.getDate()} ${['‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå', '‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°', '‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô', '‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°', '‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô', '‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°', '‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô', '‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°', '‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô', '‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°'][now.getMonth()]} ${now.getFullYear() + 543}, ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
        document.getElementById('current-update-time').textContent = currentTime;
        
        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === goalModal) {
                closeGoalModal();
            }
            if (e.target === deleteModal) {
                closeDeleteModal();
            }
            if (e.target === categoryModal) {
                closeCategoryModal();
            }
            if (e.target === settingsModal) {
                settingsModal.classList.add('hidden');
                settingsButton.classList.remove('active');
                goalSettingsButton.classList.remove('active');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9709a95712d54f5d',t:'MTc1NTQzODg0Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
